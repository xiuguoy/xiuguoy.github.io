(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c9311a6"],{"008c":function(e,t,n){"use strict";n.d(t,"a",(function(){return j})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return s})),n.d(t,"d",(function(){return k})),n.d(t,"e",(function(){return R})),n.d(t,"f",(function(){return I})),n.d(t,"g",(function(){return z}));var r=n("b2b2"),i=n("a9ab");const a=(e,t,n)=>[t,n],o=(e,t,n)=>[t,n,e[2]],c=(e,t,n)=>[t,n,e[2],e[3]];function s(e){return e?{originPosition:"upper-left"===e.originPosition?"upperLeft":"lower-left"===e.originPosition?"lowerLeft":e.originPosition,scale:e.tolerance?[e.tolerance,e.tolerance]:[1,1],translate:Object(r["j"])(e.extent)?[e.extent.xmin,e.extent.ymax]:[0,0]}:null}function l({scale:e,translate:t},n){return Math.round((n-t[0])/e[0])}function u({scale:e,translate:t},n){return Math.round((t[1]-n)/e[1])}function f(e,t,n){const r=[];let i,a,o,c;for(let s=0;s<n.length;s++){const f=n[s];s>0?(o=l(e,f[0]),c=u(e,f[1]),o===i&&c===a||(r.push(t(f,o-i,c-a)),i=o,a=c)):(i=l(e,f[0]),a=u(e,f[1]),r.push(t(f,i,a)))}return r.length>0?r:null}function h(e,t,n,r){return f(e,n?r?c:o:r?o:a,t)}function d(e,t,n,r){const i=[],s=n?r?c:o:r?o:a;for(let a=0;a<t.length;a++){const n=f(e,s,t[a]);n&&n.length>=3&&i.push(n)}return i.length?i:null}function m(e,t,n,r){const i=[],s=n?r?c:o:r?o:a;for(let a=0;a<t.length;a++){const n=f(e,s,t[a]);n&&n.length>=2&&i.push(n)}return i.length?i:null}function g({scale:e,translate:t},n){return n*e[0]+t[0]}function y({scale:e,translate:t},n){return t[1]-n*e[1]}function p(e,t,n){const r=new Array(n.length);if(!n.length)return r;const[i,a]=e.scale;let o=g(e,n[0][0]),c=y(e,n[0][1]);r[0]=t(n[0],o,c);for(let s=1;s<n.length;s++){const e=n[s];o+=e[0]*i,c-=e[1]*a,r[s]=t(e,o,c)}return r}function b(e,t,n){const r=new Array(n.length);for(let i=0;i<n.length;i++)r[i]=p(e,t,n[i]);return r}function x(e,t,n,r){return p(e,n?r?c:o:r?o:a,t)}function C(e,t,n,r){return b(e,n?r?c:o:r?o:a,t)}function w(e,t,n,r){return b(e,n?r?c:o:r?o:a,t)}function O(e,t,n,r,i){return t.xmin=l(e,n.xmin),t.ymin=u(e,n.ymin),t.xmax=l(e,n.xmax),t.ymax=u(e,n.ymax),t!==n&&(r&&(t.zmin=n.zmin,t.zmax=n.zmax),i&&(t.mmin=n.mmin,t.mmax=n.mmax)),t}function M(e,t,n,r,i){return t.points=h(e,n.points,r,i),t}function v(e,t,n,r,i){return t.x=l(e,n.x),t.y=u(e,n.y),t!==n&&(r&&(t.z=n.z),i&&(t.m=n.m)),t}function P(e,t,n,r,i){const a=d(e,n.rings,r,i);return a?(t.rings=a,t):null}function S(e,t,n,r,i){const a=m(e,n.paths,r,i);return a?(t.paths=a,t):null}function j(e,t){return e&&t?Object(i["f"])(t)?v(e,{},t,!1,!1):Object(i["h"])(t)?S(e,{},t,!1,!1):Object(i["g"])(t)?P(e,{},t,!1,!1):Object(i["e"])(t)?M(e,{},t,!1,!1):Object(i["d"])(t)?O(e,{},t,!1,!1):null:null}function k(e,t,n,i,a){return Object(r["j"])(n)&&(t.points=x(e,n.points,i,a)),t}function R(e,t,n,i,a){return Object(r["i"])(n)||(t.x=g(e,n.x),t.y=y(e,n.y),t!==n&&(i&&(t.z=n.z),a&&(t.m=n.m))),t}function I(e,t,n,i,a){return Object(r["j"])(n)&&(t.rings=w(e,n.rings,i,a)),t}function z(e,t,n,i,a){return Object(r["j"])(n)&&(t.paths=C(e,n.paths,i,a)),t}},"32dd":function(e,t,n){"use strict";var r,i;function a(e){switch(e){case"left":return r.Left;case"right":return r.Right;case"center":case"justify":return r.Center}}function o(e){switch(e){case"top":return i.Top;case"middle":return i.Center;case"baseline":return i.Baseline;case"bottom":return i.Bottom}}function c(e){switch(e){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return[r.Right,i.Bottom];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return[r.Center,i.Bottom];case"above-right":case"esriServerPointLabelPlacementAboveRight":return[r.Left,i.Bottom];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return[r.Right,i.Center];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return[r.Center,i.Center];case"center-right":case"esriServerPointLabelPlacementCenterRight":return[r.Left,i.Center];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return[r.Right,i.Top];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return[r.Center,i.Top];case"below-right":case"esriServerPointLabelPlacementBelowRight":return[r.Left,i.Top];default:return console.debug("Found invalid placement type "+e),[r.Center,i.Center]}}function s(e){switch(e){case r.Right:return-1;case r.Center:return 0;case r.Left:return 1;default:return console.debug("Found invalid horizontal alignment "+e),0}}function l(e){switch(e){case i.Top:return 1;case i.Center:return 0;case i.Bottom:case i.Baseline:return-1;default:return console.debug("Found invalid vertical alignment "+e),0}}function u(e){switch(e){case"left":return r.Left;case"right":return r.Right;case"center":case"justify":return r.Center}}function f(e){switch(e){case"above-along":case"below-along":case"center-along":case"esriServerLinePlacementAboveAlong":case"esriServerLinePlacementBelowAlong":case"esriServerLinePlacementCenterAlong":return!0;default:return!1}}n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return u})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return s})),n.d(t,"g",(function(){return o})),n.d(t,"h",(function(){return l})),n.d(t,"i",(function(){return f})),function(e){e[e.Left=-1]="Left",e[e.Center=0]="Center",e[e.Right=1]="Right"}(r||(r={})),function(e){e[e.Top=1]="Top",e[e.Center=0]="Center",e[e.Bottom=-1]="Bottom",e[e.Baseline=2]="Baseline"}(i||(i={}))},"4bad":function(e,t,n){"use strict";n.d(t,"a",(function(){return X})),n.d(t,"b",(function(){return Z}));var r=n("f7be"),i=n("2eab"),a=n("d329"),o=n("ce50"),c=n("c120"),s=(n("e6c2"),n("69e9")),l=n("9ef0"),u=n("2c63"),f=n("a29a"),h=(n("702a"),n("e92d"),n("d822"));const d="http://www.w3.org/2000/svg";let m=0,g=0;const y=Object(c["a"])("android"),p=Object(c["a"])("chrome")||y&&y>=4?"auto":"optimizeLegibility",b={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7,z:0},x=/([A-DF-Za-df-z])|([-+]?\d*[.]?\d+(?:[eE][-+]?\d+)?)/g;let C={},w={};const O={solid:"none",shortdash:[4,1],shortdot:[1,1],shortdashdot:[4,1,1,1],shortdashdotdot:[4,1,1,1,1,1],dot:[1,3],dash:[4,3],longdash:[8,3],dashdot:[4,3,1,3],longdashdot:[8,3,1,3],longdashdotdot:[8,3,1,3,1,3]},M=Math.PI;let v=1;function P(e,t){const n=e*(M/180);return Math.abs(t*Math.sin(n))+Math.abs(t*Math.cos(n))}function S(e){return e.map(e=>`${e.command} ${e.values.join(" ")}`).join(" ").trim()}function j(e,t,n,r){if(e){if("circle"===e.type)return Object(h["a"])("circle",{fill:t,"fill-rule":"evenodd",stroke:n.color,"stroke-width":n.width,"stroke-linecap":n.cap,"stroke-linejoin":n.join,"stroke-dasharray":n.dashArray,"stroke-miterlimit":"4",cx:e.cx,cy:e.cy,r:e.r});if("ellipse"===e.type)return Object(h["a"])("ellipse",{fill:t,"fill-rule":"evenodd",stroke:n.color,"stroke-width":n.width,"stroke-linecap":n.cap,"stroke-linejoin":n.join,"stroke-dasharray":n.dashArray,"stroke-miterlimit":"4",cx:e.cx,cy:e.cy,rx:e.rx,ry:e.ry});if("rect"===e.type)return Object(h["a"])("rect",{fill:t,"fill-rule":"evenodd",stroke:n.color,"stroke-width":n.width,"stroke-linecap":n.cap,"stroke-linejoin":n.join,"stroke-dasharray":n.dashArray,"stroke-miterlimit":"4",x:e.x,y:e.y,width:e.width,height:e.height});if("image"===e.type)return Object(h["a"])("image",{href:e.src,x:e.x,y:e.y,width:e.width,height:e.height,preserveAspectRatio:"none"});if("path"===e.type){const r="string"!=typeof e.path?S(e.path):e.path;return Object(h["a"])("path",{fill:t,"fill-rule":"evenodd",stroke:n.color,"stroke-width":n.width,"stroke-linecap":n.cap,"stroke-linejoin":n.join,"stroke-dasharray":n.dashArray,"stroke-miterlimit":"4",d:r})}if("text"===e.type)return Object(h["a"])("text",{fill:t,"fill-rule":"evenodd",stroke:n.color,"stroke-width":n.width,"stroke-linecap":n.cap,"stroke-linejoin":n.join,"stroke-dasharray":n.dashArray,"stroke-miterlimit":"4","text-anchor":r.align,"text-decoration":r.decoration,kerning:r.kerning,rotate:r.rotate,"text-rendering":p,"font-style":r.font.style,"font-variant":r.font.variant,"font-weight":r.font.weight,"font-size":r.font.size,"font-family":r.font.family,x:e.x,y:e.y},e.text)}return null}function k(e){const t={fill:"none",pattern:null,linearGradient:null};if(e)if("type"in e&&"pattern"===e.type){const n="patternId-"+ ++m;t.fill=`url(#${n})`,t.pattern={id:n,x:e.x,y:e.y,width:e.width,height:e.height,image:{x:0,y:0,width:e.width,height:e.height,href:e.src}}}else if("type"in e&&"linear"===e.type){const n="linearGradientId-"+ ++g;t.fill=`url(#${n})`,t.linearGradient={id:n,x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,stops:e.colors.map(e=>({offset:e.offset,color:e.color&&new l["a"](e.color).toString()}))}}else if(e){const n=new l["a"](e);t.fill=n.toString()}return t}function R(e){const t={color:"none",width:1,cap:"butt",join:"4",dashArray:"none"};if(e&&(null!=e.width&&(t.width=e.width),e.cap&&(t.cap=e.cap),e.join&&(t.join=e.join.toString()),e.color&&(t.color=new l["a"](e.color).toString()),e.style)){let n=null;if(e.style in O&&(n=O[e.style]),Array.isArray(n)){n=n.slice(0);for(let t=0;t<n.length;++t)n[t]*=e.width;if("butt"!==e.cap){for(let t=0;t<n.length;t+=2)n[t]-=e.width,n[t]<1&&(n[t]=1);for(let t=1;t<n.length;t+=2)n[t]+=e.width}n=n.join(",")}t.dashArray=n}return t}function I(e,t){const n={align:null,decoration:null,kerning:null,rotate:null,font:{style:null,variant:null,weight:null,size:null,family:null}};return e&&(n.align=e.align,n.decoration=e.decoration,n.kerning=e.kerning?"auto":"0",n.rotate=e.rotated?"90":"0",n.font.style=t.style||"normal",n.font.variant=t.variant||"normal",n.font.weight=t.weight||"normal",n.font.size=t.size&&t.size.toString()||"10pt",n.font.family=t.family||"serif"),n}function z(e){const{pattern:t,linearGradient:n}=e;if(t)return Object(h["a"])("pattern",{id:t.id,patternUnits:"userSpaceOnUse",x:t.x,y:t.y,width:t.width,height:t.height},Object(h["a"])("image",{x:t.image.x,y:t.image.y,width:t.image.width,height:t.image.height,href:t.image.href}));if(n){const e=n.stops.map((e,t)=>Object(h["a"])("stop",{key:t+"-stop",offset:e.offset,"stop-color":e.color}));return Object(h["a"])("linearGradient",{id:n.id,gradientUnits:"userSpaceOnUse",x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2},e)}return null}function T(e,t,n){return Object(f["i"])(e,Object(f["c"])(e),[t,n])}function A(e,t,n,r,i){return Object(f["h"])(e,Object(f["c"])(e),[t,n]),e[4]=e[4]*t-r*t+r,e[5]=e[5]*n-i*n+i,e}function L(e,t,n,r){const i=t%360*Math.PI/180;Object(f["g"])(e,Object(f["c"])(e),i);const a=Math.cos(i),o=Math.sin(i),c=e[4],s=e[5];return e[4]=c*a-s*o+r*o-n*a+n,e[5]=s*a+c*o-n*o-r*a+r,e}function B(e,t){C&&"left"in C?(C.left>e&&(C.left=e),C.right<e&&(C.right=e),C.top>t&&(C.top=t),C.bottom<t&&(C.bottom=t)):C={left:e,bottom:t,right:e,top:t}}function D(e){const t=e.args,n=t.length;let r;switch(e.action){case"M":case"L":case"C":case"S":case"Q":case"T":for(r=0;r<n;r+=2)B(t[r],t[r+1]);w.x=t[n-2],w.y=t[n-1];break;case"H":for(r=0;r<n;++r)B(t[r],w.y);w.x=t[n-1];break;case"V":for(r=0;r<n;++r)B(w.x,t[r]);w.y=t[n-1];break;case"m":{let e=0;"x"in w||(B(w.x=t[0],w.y=t[1]),e=2);for(r=e;r<n;r+=2)B(w.x+=t[r],w.y+=t[r+1]);break}case"l":case"t":for(r=0;r<n;r+=2)B(w.x+=t[r],w.y+=t[r+1]);break;case"h":for(r=0;r<n;++r)B(w.x+=t[r],w.y);break;case"v":for(r=0;r<n;++r)B(w.x,w.y+=t[r]);break;case"c":for(r=0;r<n;r+=6)B(w.x+t[r],w.y+t[r+1]),B(w.x+t[r+2],w.y+t[r+3]),B(w.x+=t[r+4],w.y+=t[r+5]);break;case"s":case"q":for(r=0;r<n;r+=4)B(w.x+t[r],w.y+t[r+1]),B(w.x+=t[r+2],w.y+=t[r+3]);break;case"A":for(r=0;r<n;r+=7)B(t[r+5],t[r+6]);w.x=t[n-2],w.y=t[n-1];break;case"a":for(r=0;r<n;r+=7)B(w.x+=t[r+5],w.y+=t[r+6])}}function N(e,t,n){const r=b[e.toLowerCase()];let i;"number"==typeof r&&(r?t.length>=r&&(i={action:e,args:t.slice(0,t.length-t.length%r)},n.push(i),D(i)):(i={action:e,args:[]},n.push(i),D(i)))}function F(e){const t=("string"!=typeof e.path?S(e.path):e.path).match(x),n=[];if(C={},w={},!t)return null;let r="",i=[];const a=t.length;for(let c=0;c<a;++c){const e=t[c],a=parseFloat(e);isNaN(a)?(r&&N(r,i,n),i=[],r=e):i.push(a)}N(r,i,n);const o={x:0,y:0,width:0,height:0};return C&&"left"in C&&(o.x=C.left,o.y=C.top,o.width=C.right-C.left,o.height=C.bottom-C.top),o}function _(e){const t={x:0,y:0,width:0,height:0};if("circle"===e.type)t.x=e.cx-e.r,t.y=e.cy-e.r,t.width=2*e.r,t.height=2*e.r;else if("ellipse"===e.type)t.x=e.cx-e.rx,t.y=e.cy-e.ry,t.width=2*e.rx,t.height=2*e.ry;else if("image"===e.type||"rect"===e.type)t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height;else if("path"===e.type){const n=F(e);t.x=n.x,t.y=n.y,t.width=n.width,t.height=n.height}return t}function E(e){const t={x:0,y:0,width:0,height:0};let n=null,r=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY;for(const a of e)n?(n.x=Math.min(n.x,a.x),n.y=Math.min(n.y,a.y),r=Math.max(r,a.x+a.width),i=Math.max(i,a.y+a.height)):(n=t,n.x=a.x,n.y=a.y,r=a.x+a.width,i=a.y+a.height);return n&&(n.width=r-n.x,n.height=i-n.y),n}function U(e,t,n,r,i,a,o,c,s){let l=(o&&a?P(a,t):t)/2,h=(o&&a?P(a,n):n)/2;if(s){const e=s[0],t=s[1];l=(o&&a?P(a,e):e)/2,h=(o&&a?P(a,t):t)/2}const d=e.width+r,m=e.height+r,g=Object(u["a"])(),y=Object(u["a"])();let p=!1;if(i&&0!==d&&0!==m){const e=t!==n?t/n:d/m,r=t>n?t:n;let i=1,a=1;isNaN(r)||(e>1?(i=r/d,a=r/e/m):(a=r/m,i=r*e/d)),Object(f["f"])(y,y,A(g,i,a,l,h)),p=!0}const b=e.x+(d-r)/2,x=e.y+(m-r)/2;if(Object(f["f"])(y,y,T(g,l-b,h-x)),!p&&(d>t||m>n)){const e=d/t>m/n,r=(e?t:n)/(e?d:m);Object(f["f"])(y,y,A(g,r,r,b,x))}return a&&Object(f["f"])(y,y,L(g,a,b,x)),c&&Object(f["f"])(y,y,T(g,c[0],c[1])),`matrix(${y[0]},${y[1]},${y[2]},${y[3]},${y[4]},${y[5]})`}function G(e,t,n){const r=null==e?void 0:e.effects.find(e=>"bloom"===e.type);if(!r)return null;const{strength:i,radius:a}=r,o=i>0?a:0,c=(i+o)*t,s=4*i+1;return Object(h["a"])("filter",{id:"bloom"+n,x:"-100%",y:"-100%",width:"300%",height:"300%",filterUnits:"userSpaceOnUse"},Object(h["a"])("feMorphology",{operator:"dilate",radius:(i+.5*o)*(5**(t/100)*(.4+t/100)),in:"SourceGraphic",result:"dilate"}),Object(h["a"])("feGaussianBlur",{in:"dilate",stdDeviation:c/25,result:"blur"}),Object(h["a"])("feGaussianBlur",{in:"blur",stdDeviation:c/50,result:"intensityBlur"}),Object(h["a"])("feComponentTransfer",{in:"SourceGraphic",result:"intensityBrightness"},Object(h["a"])("feFuncR",{type:"linear",slope:s}),Object(h["a"])("feFuncG",{type:"linear",slope:s}),Object(h["a"])("feFuncB",{type:"linear",slope:s})),Object(h["a"])("feMerge",null,Object(h["a"])("feMergeNode",{in:"intensityBlur"}),Object(h["a"])("feMergeNode",{in:"intensityBrightness"}),Object(h["a"])("feGaussianBlur",{stdDeviation:i/10})))}function W(e,t,n,r){const i=[],a=[],o=++v,c=G(null==r?void 0:r.effectView,t,o);let s=null;if(c){var l;const e=null==r||null==(l=r.effectView)?void 0:l.effects.find(e=>"bloom"===e.type),i=(e.strength?e.strength+e.radius/2:0)/3,a=t+t*i,o=n+n*i;s=[Math.max(a,10),Math.max(o,10)]}for(const u of e){const e=[],o=[];let c=0,l=0,f=0;for(const t of u){const{shape:n,fill:r,stroke:a,font:s,offset:u}=t;c+=a&&a.width||0;const h=k(r),d=R(a),m="text"===n.type?I(n,s):null;i.push(z(h)),e.push(j(n,h.fill,d,m)),o.push(_(n)),u&&(l+=u[0],f+=u[1])}const d=U(E(o),t,n,c,null==r?void 0:r.scale,null==r?void 0:r.rotation,null==r?void 0:r.useRotationSize,[l,f],s);a.push(Object(h["a"])("g",{transform:d},e))}return null!=r&&r.useRotationSize&&null!=r&&r.rotation&&(t=P(null==r?void 0:r.rotation,t),n=P(null==r?void 0:r.rotation,n)),c&&(t=s[0],n=s[1]),Object(h["a"])("svg",{xmlns:d,width:t,height:n,style:"display: block;"},c,Object(h["a"])("defs",null,i),c?Object(h["a"])("g",{filter:`url(#bloom${o})`},a):a)}var H=n("ac8e");const Y=Object(s["a"])();function X(e,t,n){const r=Math.ceil(t[0]),i=Math.ceil(t[1]);if(!e.some(e=>!!e.length))return null;const a=n&&n.node||document.createElement("div");return null!=n.opacity&&(a.style.opacity=n.opacity.toString()),null!=n.effectView&&(a.style.filter=Object(H["e"])(n.effectView)),Y.append(a,W.bind(null,e,r,i,n)),a}function V(e,t){e=Math.ceil(e),t=Math.ceil(t);const n=document.createElement("canvas");n.width=e,n.height=t,n.style.width=e+"px",n.style.height=t+"px";const r=n.getContext("2d");return r.clearRect(0,0,e,t),r}function J(e,t,n){return e?Object(i["default"])(e,{responseType:"image"}).then(e=>{const r=e.data,i=r.width,a=r.height,o=i/a;let c=t;if(n){const e=Math.max(i,a);c=Math.min(c,e)}return{image:r,width:o<=1?Math.ceil(c*o):c,height:o<=1?c:Math.ceil(c/o)}}):Promise.reject(new o["a"]("renderUtils: imageDataSize","href not provided."))}function q(e,t){return!(!e||"ignore"===t)&&("multiply"!==t||255!==e.r||255!==e.g||255!==e.b||1!==e.a)}function $(e,t,n,r,i){switch(i){case"multiply":e[t+0]*=n[0],e[t+1]*=n[1],e[t+2]*=n[2],e[t+3]*=n[3];break;default:{const i=Object(a["a"])({r:e[t+0],g:e[t+1],b:e[t+2]});i.h=r.h,i.s=r.s,i.v=i.v/100*r.v;const o=Object(a["d"])(i);e[t+0]=o.r,e[t+1]=o.g,e[t+2]=o.b,e[t+3]*=n[3];break}}}function Z(e,t,n,i,o){return J(e,t,o).then(o=>{const s=o.width?o.width:t,l=o.height?o.height:t;if(o.image&&q(n,i)){let t=o.image.width,r=o.image.height;Object(c["a"])("edge")&&/\.svg$/i.test(e)&&(t-=1,r-=1);const u=V(s,l);u.drawImage(o.image,0,0,t,r,0,0,s,l);const f=u.getImageData(0,0,s,l),h=[n.r/255,n.g/255,n.b/255,n.a],d=Object(a["a"])(n);for(let e=0;e<f.data.length;e+=4)$(f.data,e,h,d,i);u.putImageData(f,0,0),e=u.canvas.toDataURL("image/png")}else{const t=r["b"]&&r["b"].findCredential(e);if(t&&t.token){const n=-1===e.indexOf("?")?"?":"&";e=`${e}${n}token=${t.token}`}}return{url:e,width:s,height:l}}).catch((function(){return{url:e,width:t,height:t}}))}},"7b82":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("793f"),i=n("0eee"),a=n("405c"),o=n("36b8");const c=512;class s{constructor(e){this._resourceManager=e}dispose(){this._rasterizationCanvas=null}rasterizeJSONResource(e,t,n){if(this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),"simple-fill"===e.type||"esriSFS"===e.type){const[n,i,a]=r["d"].rasterizeSimpleFill(this._rasterizationCanvas,e.style,t);return{size:[i,a],image:new Uint32Array(n.buffer),sdf:!1,simplePattern:!0,anchorX:0,anchorY:0}}if("simple-line"===e.type||"esriSLS"===e.type||"line"===e.type&&e.dashTemplate){let t,n;if("simple-line"===e.type||"esriSLS"===e.type)switch(t=Object(r["e"])(e.style,e.cap),e.cap){case"butt":n="Butt";break;case"square":n="Square";break;default:n="Round"}else t=e.dashTemplate,n=e.cim.capStyle;const[i,a,o]=r["d"].rasterizeSimpleLine(t,n);return{size:[a,o],image:new Uint32Array(i.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}}let o,c,s;if("simple-marker"===e.type||"esriSMS"===e.type||"line-marker"===e.type?(o=r["b"].fromSimpleMarker(e),s=Object(a["c"])(o)):e.cim&&"CIMHatchFill"===e.cim.type?(o=r["b"].fromCIMHatchFill(e.cim),c=new i["a"](o.frame.xmin,-o.frame.ymax,o.frame.xmax-o.frame.xmin,o.frame.ymax-o.frame.ymin)):e.cim.markerPlacement&&"CIMMarkerPlacementInsidePolygon"===e.cim.markerPlacement.type?(o=r["b"].fromCIMInsidePolygon(e.cim),c=new i["a"](o.frame.xmin,-o.frame.ymax,o.frame.xmax-o.frame.xmin,o.frame.ymax-o.frame.ymin)):(o=e.cim,s=Object(a["c"])(o)),s&&!n){const[e,t,n]=Object(a["a"])(s);return e?{size:[t,n],image:new Uint32Array(e.buffer),sdf:!0,simplePattern:!0,anchorX:0,anchorY:0}:null}const[l,u,f,h,d]=r["b"].rasterize(this._rasterizationCanvas,o,c,this._resourceManager,!n);return l?{size:[u,f],image:new Uint32Array(l.buffer),sdf:!1,simplePattern:!1,anchorX:h,anchorY:d}:null}rasterizeImageResource(e,t,n,r){this._rasterizationCanvas||(this._rasterizationCanvas=document.createElement("canvas")),this._rasterizationCanvas.width=e,this._rasterizationCanvas.height=t;const i=this._rasterizationCanvas.getContext("2d");n instanceof ImageData?i.putImageData(n,0,0):(n.setAttribute("width",e+"px"),n.setAttribute("height",t+"px"),i.drawImage(n,0,0,e,t));const a=i.getImageData(0,0,e,t),s=new Uint8Array(a.data);if(r)for(const o of r)if(o&&o.oldColor&&4===o.oldColor.length&&o.newColor&&4===o.newColor.length){const[e,t,n,r]=o.oldColor,[i,a,c,l]=o.newColor;if(e===i&&t===a&&n===c&&r===l)continue;for(let o=0;o<s.length;o+=4)e===s[o]&&t===s[o+1]&&n===s[o+2]&&r===s[o+3]&&(s[o]=i,s[o+1]=a,s[o+2]=c,s[o+3]=l)}let l;for(let o=0;o<s.length;o+=4)l=s[o+3]/255,s[o]=s[o]*l,s[o+1]=s[o+1]*l,s[o+2]=s[o+2]*l;let u=s,f=e,h=t;const d=c;if(f>=d||h>=d){const n=f/h;n>1?(f=d,h=Math.round(d/n)):(h=d,f=Math.round(d*n)),u=new Uint8Array(4*f*h);const r=new Uint8ClampedArray(u.buffer);Object(o["m"])(s,e,t,r,f,h,!1)}return{size:[f,h],image:new Uint32Array(u.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}}},"8c81":function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return j})),n.d(t,"c",(function(){return M})),n.d(t,"d",(function(){return P})),n.d(t,"e",(function(){return S})),n.d(t,"f",(function(){return u})),n.d(t,"g",(function(){return U})),n.d(t,"h",(function(){return X})),n.d(t,"i",(function(){return W})),n.d(t,"j",(function(){return G})),n.d(t,"k",(function(){return H})),n.d(t,"l",(function(){return Y})),n.d(t,"m",(function(){return V})),n.d(t,"n",(function(){return F})),n.d(t,"o",(function(){return o})),n.d(t,"p",(function(){return z})),n.d(t,"q",(function(){return I})),n.d(t,"r",(function(){return s})),n.d(t,"s",(function(){return R})),n.d(t,"t",(function(){return A})),n.d(t,"u",(function(){return c})),n.d(t,"v",(function(){return k})),n.d(t,"w",(function(){return E})),n.d(t,"x",(function(){return r})),n.d(t,"y",(function(){return _})),n.d(t,"z",(function(){return i})),n.d(t,"A",(function(){return N})),n.d(t,"B",(function(){return m})),n.d(t,"C",(function(){return g})),n.d(t,"D",(function(){return y})),n.d(t,"E",(function(){return p})),n.d(t,"F",(function(){return d})),n.d(t,"G",(function(){return h})),n.d(t,"H",(function(){return b})),n.d(t,"I",(function(){return x})),n.d(t,"J",(function(){return C})),n.d(t,"K",(function(){return w})),n.d(t,"L",(function(){return O})),n.d(t,"M",(function(){return f})),n.d(t,"N",(function(){return l})),n.d(t,"O",(function(){return T})),n.d(t,"P",(function(){return a})),n.d(t,"Q",(function(){return D})),n.d(t,"R",(function(){return B})),n.d(t,"S",(function(){return L}));const r=1e-30,i=4294967295,a=512,o=8,c=29,s=24,l=8,u={metrics:{width:15,height:17,left:0,top:-7,advance:14}},f=0,h=0,d=0,m=1,g=2,y=3,p=4,b=12,x=5,C=6,w=5,O=6,M=0,v=1,P=2,S=3,j=4,k=2,R=1,I=2,z=4,T=1.05,A=3,L=5,B=6,D=1.15,N=2,F=8,_=500,E=10,U=2,G=0,W=1,H=4,Y=8,X=4,V=1},ab39:function(e,t,n){"use strict";var r,i,a,o,c,s,l,u,f,h,d,m,g,y,p,b,x,C,w,O,M,v,P,S,j,k,R,I,z,T,A,L,B,D,N,F,_,E,U,G,W,H,Y,X,V,J,q,$,Z,Q,K,ee,te,ne,re,ie,ae,oe,ce,se;n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return b})),n.d(t,"c",(function(){return p})),n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"g",(function(){return u})),n.d(t,"h",(function(){return f})),n.d(t,"i",(function(){return w})),n.d(t,"j",(function(){return O})),n.d(t,"k",(function(){return M})),n.d(t,"l",(function(){return S})),n.d(t,"m",(function(){return R})),n.d(t,"n",(function(){return I})),n.d(t,"o",(function(){return i})),n.d(t,"p",(function(){return N})),n.d(t,"q",(function(){return F})),n.d(t,"r",(function(){return U})),n.d(t,"s",(function(){return X})),n.d(t,"t",(function(){return V})),n.d(t,"u",(function(){return J})),n.d(t,"v",(function(){return q})),n.d(t,"w",(function(){return re})),n.d(t,"x",(function(){return ie})),n.d(t,"y",(function(){return oe})),function(e){e[e.BUTT=0]="BUTT",e[e.ROUND=1]="ROUND",e[e.SQUARE=2]="SQUARE",e[e.UNKNOWN=4]="UNKNOWN"}(r||(r={})),function(e){e[e.BEVEL=0]="BEVEL",e[e.ROUND=1]="ROUND",e[e.MITER=2]="MITER",e[e.UNKNOWN=4]="UNKNOWN"}(i||(i={})),function(e){e[e.SCREEN=0]="SCREEN",e[e.MAP=1]="MAP"}(a||(a={})),function(e){e[e.Tint=0]="Tint",e[e.Ignore=1]="Ignore",e[e.Multiply=99]="Multiply"}(o||(o={})),function(e){e.Both="Both",e.JustBegin="JustBegin",e.JustEnd="JustEnd",e.None="None"}(c||(c={})),function(e){e[e.Mosaic=0]="Mosaic",e[e.Centered=1]="Centered"}(s||(s={})),function(e){e[e.Normal=0]="Normal",e[e.Superscript=1]="Superscript",e[e.Subscript=2]="Subscript"}(l||(l={})),function(e){e[e.MSSymbol=0]="MSSymbol",e[e.Unicode=1]="Unicode"}(u||(u={})),function(e){e[e.Unspecified=0]="Unspecified",e[e.TrueType=1]="TrueType",e[e.PSOpenType=2]="PSOpenType",e[e.TTOpenType=3]="TTOpenType",e[e.Type1=4]="Type1"}(f||(f={})),function(e){e[e.Display=0]="Display",e[e.Map=1]="Map"}(h||(h={})),function(e){e[e.Z=0]="Z",e[e.X=1]="X",e[e.Y=2]="Y"}(d||(d={})),function(e){e[e.XYZ=0]="XYZ",e[e.ZXY=1]="ZXY",e[e.YXZ=2]="YXZ"}(m||(m={})),function(e){e[e.Rectangle=0]="Rectangle",e[e.RoundedRectangle=1]="RoundedRectangle",e[e.Oval=2]="Oval"}(g||(g={})),function(e){e[e.None=0]="None",e[e.Alpha=1]="Alpha",e[e.Screen=2]="Screen",e[e.Multiply=3]="Multiply",e[e.Add=4]="Add"}(y||(y={})),function(e){e[e.TTB=0]="TTB",e[e.RTL=1]="RTL",e[e.BTT=2]="BTT"}(p||(p={})),function(e){e[e.None=0]="None",e[e.SignPost=1]="SignPost",e[e.FaceNearPlane=2]="FaceNearPlane"}(b||(b={})),function(e){e[e.Float=0]="Float",e[e.String=1]="String",e[e.Boolean=2]="Boolean"}(x||(x={})),function(e){e[e.Intersect=0]="Intersect",e[e.Subtract=1]="Subtract"}(C||(C={})),function(e){e.OpenEnded="OpenEnded",e.Block="Block",e.Crossed="Crossed"}(w||(w={})),function(e){e.FullGeometry="FullGeometry",e.PerpendicularFromFirstSegment="PerpendicularFromFirstSegment",e.ReversedFirstSegment="ReversedFirstSegment",e.PerpendicularToSecondSegment="PerpendicularToSecondSegment",e.SecondSegmentWithTicks="SecondSegmentWithTicks",e.DoublePerpendicular="DoublePerpendicular",e.OppositeToFirstSegment="OppositeToFirstSegment",e.TriplePerpendicular="TriplePerpendicular",e.HalfCircleFirstSegment="HalfCircleFirstSegment",e.HalfCircleSecondSegment="HalfCircleSecondSegment",e.HalfCircleExtended="HalfCircleExtended",e.OpenCircle="OpenCircle",e.CoverageEdgesWithTicks="CoverageEdgesWithTicks",e.GapExtentWithDoubleTicks="GapExtentWithDoubleTicks",e.GapExtentMidline="GapExtentMidline",e.Chevron="Chevron",e.PerpendicularWithArc="PerpendicularWithArc",e.ClosedHalfCircle="ClosedHalfCircle",e.TripleParallelExtended="TripleParallelExtended",e.ParallelWithTicks="ParallelWithTicks",e.Parallel="Parallel",e.PerpendicularToFirstSegment="PerpendicularToFirstSegment",e.ParallelOffset="ParallelOffset",e.OffsetOpposite="OffsetOpposite",e.OffsetSame="OffsetSame",e.CircleWithArc="CircleWithArc",e.DoubleJog="DoubleJog",e.PerpendicularOffset="PerpendicularOffset",e.LineExcludingLastSegment="LineExcludingLastSegment",e.MultivertexArrow="MultivertexArrow",e.CrossedArrow="CrossedArrow",e.ChevronArrow="ChevronArrow",e.ChevronArrowOffset="ChevronArrowOffset",e.PartialFirstSegment="PartialFirstSegment",e.Arch="Arch",e.CurvedParallelTicks="CurvedParallelTicks",e.Arc90Degrees="Arc90Degrees"}(O||(O={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square",e.TrueBuffer="TrueBuffer"}(M||(M={})),function(e){e.ClosePath="ClosePath",e.ConvexHull="ConvexHull",e.RectangularBox="RectangularBox"}(v||(v={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(P||(P={})),function(e){e.Mitered="Mitered",e.Bevelled="Bevelled",e.Rounded="Rounded",e.Square="Square"}(S||(S={})),function(e){e.Fast="Fast",e.Accurate="Accurate"}(j||(j={})),function(e){e.BeginningOfLine="BeginningOfLine",e.EndOfLine="EndOfLine"}(k||(k={})),function(e){e.Sinus="Sinus",e.Square="Square",e.Triangle="Triangle",e.Random="Random"}(R||(R={})),function(e){e[e.None=0]="None",e[e.Default=1]="Default",e[e.Force=2]="Force"}(I||(I={})),function(e){e[e.Buffered=0]="Buffered",e[e.Left=1]="Left",e[e.Right=2]="Right",e[e.AlongLine=3]="AlongLine"}(z||(z={})),function(e){e[e.Linear=0]="Linear",e[e.Rectangular=1]="Rectangular",e[e.Circular=2]="Circular",e[e.Buffered=3]="Buffered"}(T||(T={})),function(e){e[e.Discrete=0]="Discrete",e[e.Continuous=1]="Continuous"}(A||(A={})),function(e){e[e.AcrossLine=0]="AcrossLine",e[e.AloneLine=1]="AloneLine"}(L||(L={})),function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.Center=2]="Center",e[e.Justify=3]="Justify"}(B||(B={})),function(e){e[e.Base=0]="Base",e[e.MidPoint=1]="MidPoint",e[e.ThreePoint=2]="ThreePoint",e[e.FourPoint=3]="FourPoint",e[e.Underline=4]="Underline",e[e.CircularCW=5]="CircularCW",e[e.CircularCCW=6]="CircularCCW"}(D||(D={})),function(e){e.Butt="Butt",e.Round="Round",e.Square="Square"}(N||(N={})),function(e){e.NoConstraint="NoConstraint",e.HalfPattern="HalfPattern",e.HalfGap="HalfGap",e.FullPattern="FullPattern",e.FullGap="FullGap",e.Custom="Custom"}(F||(F={})),function(e){e[e.None=-1]="None",e[e.Custom=0]="Custom",e[e.Circle=1]="Circle",e[e.OpenArrow=2]="OpenArrow",e[e.ClosedArrow=3]="ClosedArrow",e[e.Diamond=4]="Diamond"}(_||(_={})),function(e){e[e.ExtraLeading=0]="ExtraLeading",e[e.Multiple=1]="Multiple",e[e.Exact=2]="Exact"}(E||(E={})),function(e){e.Bevel="Bevel",e.Round="Round",e.Miter="Miter"}(U||(U={})),function(e){e[e.Default=0]="Default",e[e.String=1]="String",e[e.Numeric=2]="Numeric"}(G||(G={})),function(e){e[e.InsidePolygon=0]="InsidePolygon",e[e.PolygonCenter=1]="PolygonCenter",e[e.RandomlyInsidePolygon=2]="RandomlyInsidePolygon"}(W||(W={})),function(e){e[e.Tint=0]="Tint",e[e.Replace=1]="Replace",e[e.Multiply=2]="Multiply"}(H||(H={})),function(e){e[e.ClipAtBoundary=0]="ClipAtBoundary",e[e.RemoveIfCenterOutsideBoundary=1]="RemoveIfCenterOutsideBoundary",e[e.DoNotTouchBoundary=2]="DoNotTouchBoundary",e[e.DoNotClip=3]="DoNotClip"}(Y||(Y={})),function(e){e.NoConstraint="NoConstraint",e.WithMarkers="WithMarkers",e.WithFullGap="WithFullGap",e.WithHalfGap="WithHalfGap",e.Custom="Custom"}(X||(X={})),function(e){e.Fixed="Fixed",e.Random="Random",e.RandomFixedQuantity="RandomFixedQuantity"}(V||(V={})),function(e){e.LineMiddle="LineMiddle",e.LineBeginning="LineBeginning",e.LineEnd="LineEnd",e.SegmentMidpoint="SegmentMidpoint"}(J||(J={})),function(e){e.OnPolygon="OnPolygon",e.CenterOfMass="CenterOfMass",e.BoundingBoxCenter="BoundingBoxCenter"}(q||(q={})),function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"}($||($={})),function(e){e[e.MarkerCenter=0]="MarkerCenter",e[e.MarkerBounds=1]="MarkerBounds"}(Z||(Z={})),function(e){e[e.None=0]="None",e[e.PropUniform=1]="PropUniform",e[e.PropNonuniform=2]="PropNonuniform",e[e.DifUniform=3]="DifUniform",e[e.DifNonuniform=4]="DifNonuniform"}(Q||(Q={})),function(e){e.Tube="Tube",e.Strip="Strip",e.Wall="Wall"}(K||(K={})),function(e){e[e.Random=0]="Random",e[e.Increasing=1]="Increasing",e[e.Decreasing=2]="Decreasing",e[e.IncreasingThenDecreasing=3]="IncreasingThenDecreasing"}(ee||(ee={})),function(e){e[e.Relative=0]="Relative",e[e.Absolute=1]="Absolute"}(te||(te={})),function(e){e[e.Normal=0]="Normal",e[e.LowerCase=1]="LowerCase",e[e.Allcaps=2]="Allcaps"}(ne||(ne={})),function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(re||(re={})),function(e){e.Draft="Draft",e.Picture="Picture",e.Text="Text"}(ie||(ie={})),function(e){e[e.Top=0]="Top",e[e.Center=1]="Center",e[e.Baseline=2]="Baseline",e[e.Bottom=3]="Bottom"}(ae||(ae={})),function(e){e[e.Right=0]="Right",e[e.Upright=1]="Upright"}(oe||(oe={})),function(e){e[e.Small=0]="Small",e[e.Medium=1]="Medium",e[e.Large=2]="Large"}(ce||(ce={})),function(e){e[e.Calm=0]="Calm",e[e.Rippled=1]="Rippled",e[e.Slight=2]="Slight",e[e.Moderate=3]="Moderate"}(se||(se={}))},d114:function(e,t,n){"use strict";n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return o})),n.d(t,"c",(function(){return i}));const r=new Float32Array(1);new Uint32Array(r.buffer);function i(e){return[255&e,(65280&e)>>>8,(16711680&e)>>>16,(4278190080&e)>>>24]}function a(e,t){return 65535&e|t<<16}function o(e,t,n,r){return 255&e|(255&t)<<8|(255&n)<<16|r<<24}},d329:function(e,t,n){"use strict";function r(e){return"r"in e&&"g"in e&&"b"in e}function i(e){return"h"in e&&"s"in e&&"v"in e}function a(e){return"l"in e&&"a"in e&&"b"in e}function o(e){return"l"in e&&"c"in e&&"h"in e}function c(e){return"x"in e&&"y"in e&&"z"in e}n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return P})),n.d(t,"c",(function(){return S})),n.d(t,"d",(function(){return M}));const s=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],l=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function u(e,t){const n=[];let r,i;if(e[0].length!==t.length)throw"dimensions do not match";const a=e.length,o=e[0].length;let c=0;for(r=0;r<a;r++){for(c=0,i=0;i<o;i++)c+=e[r][i]*t[i];n.push(c)}return n}function f(e){const t=[e.r/255,e.g/255,e.b/255].map(e=>e<=.04045?e/12.92:((e+.055)/1.055)**2.4),n=u(s,t);return{x:100*n[0],y:100*n[1],z:100*n[2]}}function h(e){const t=u(l,[e.x/100,e.y/100,e.z/100]).map(e=>{const t=e<=.0031308?12.92*e:1.055*e**(1/2.4)-.055;return Math.min(1,Math.max(t,0))});return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function d(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map(e=>e>(6/29)**3?e**(1/3):1/3*(29/6)**2*e+4/29);return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function m(e){const t=e.l,n=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map(e=>e>6/29?e**3:3*(6/29)**2*(e-4/29));return{x:95.047*n[0],y:100*n[1],z:108.883*n[2]}}function g(e){const t=e.l,n=e.a,r=e.b,i=Math.sqrt(n*n+r*r);let a=Math.atan2(r,n);return a=a>0?a:a+2*Math.PI,{l:t,c:i,h:a}}function y(e){const t=e.l,n=e.c,r=e.h;return{l:t,a:n*Math.cos(r),b:n*Math.sin(r)}}function p(e){return d(f(e))}function b(e){return h(m(e))}function x(e){return g(d(f(e)))}function C(e){return h(m(y(e)))}function w(e){const t=e.r,n=e.g,r=e.b,i=Math.max(t,n,r),a=i-Math.min(t,n,r);let o=i,c=0===a?0:i===t?(n-r)/a%6:i===n?(r-t)/a+2:(t-n)/a+4,s=0===a?0:a/o;return c<0&&(c+=6),c*=60,s*=100,o*=100/255,{h:c,s:s,v:o}}function O(e){const t=(e.h+360)%360/60,n=e.s/100,r=e.v/100*255,i=r*n,a=i*(1-Math.abs(t%2-1));let o;switch(Math.floor(t)){case 0:o={r:i,g:a,b:0};break;case 1:o={r:a,g:i,b:0};break;case 2:o={r:0,g:i,b:a};break;case 3:o={r:0,g:a,b:i};break;case 4:o={r:a,g:0,b:i};break;case 5:case 6:o={r:i,g:0,b:a};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+r-i),o.g=Math.round(o.g+r-i),o.b=Math.round(o.b+r-i),o}function M(e){return r(e)?e:o(e)?C(e):a(e)?b(e):c(e)?h(e):i(e)?O(e):e}function v(e){return i(e)?e:w(M(e))}function P(e){return a(e)?e:p(M(e))}function S(e){return o(e)?e:x(M(e))}},fcb9:function(e,t,n){"use strict";n.r(t),n.d(t,"previewCIMSymbol",(function(){return j}));var r,i=n("a915"),a=n("9ef0"),o=n("2eab"),c=n("f4cc"),s=n("b3b6"),l=n("a9ab"),u=n("4fcb"),f=n("27a2"),h=n("7b82"),d=n("357b"),m=n("36b8"),g=n("d445"),y=n("485a");!function(e){e.Legend="legend",e.Preview="preview"}(r||(r={}));const p=(e,t,n)=>{if(e&&e.targetSize){let r;if(n){const t=Math.max(n.frame.xmax-n.frame.xmin,n.frame.ymax-n.frame.ymin);r=e.targetSize/Object(i["c"])(t)}else r=e.targetSize/t.referenceSize;return r}return e&&e.scaleFactor?e.scaleFactor:1},b={fill:{legend:{frame:{xmax:15,xmin:0,ymax:15,ymin:0},geometry:{rings:[[[0,15],[15,7.5],[15,0],[0,0],[0,15]]]},canvasPaths:{rings:[[[0,15],[0,0],[15,7.5],[15,15],[0,15]]]}},preview:{frame:{xmax:100,xmin:0,ymax:100,ymin:0},geometry:{rings:[[[0,100],[100,100],[100,0],[0,0],[0,100]]]},canvasPaths:{rings:[[[0,100],[0,0],[100,0],[100,100],[0,100]]]}}},stroke:{legend:{frame:{xmax:24,xmin:0,ymax:2,ymin:-2},geometry:{paths:[[[0,0],[12,0],[24,0]]]},canvasPaths:{paths:[[[0,2],[12,2],[24,2]]]}},preview:{frame:{xmax:100,xmin:0,ymax:2,ymin:-2},geometry:{paths:[[[0,0],[50,0],[100,0]]]},canvasPaths:{paths:[[[0,2],[50,2],[100,2]]]}}}};class x{constructor(e,t){this._spatialReference=e,this._avoidSDF=t,this._resourceCache=new Map,this._pictureMarkerCache=new Map,this._textRasterizer=new d["a"],this._cimResourceManager=new f["a"],this._rasterizer=new h["a"](this._cimResourceManager)}async rasterizeCIMSymbolAsync(e,t,n,r,i,a,o,c){r=r||(t?null!=t.centroid?"esriGeometryPolygon":Object(l["c"])(t.geometry):null)||w(e);const s=await this.analyzeCIMSymbol(e,t?C(t.attributes):null,n,r,c);return this.rasterizeCIMSymbol(s,t,r,i,a,o)}async analyzeCIMSymbol(e,t,n,r,i){const a=[],o=t?{geometryType:r,spatialReference:this._spatialReference,fields:t}:null;let s;await Object(u["b"])(e.data,o,this._cimResourceManager,a,this._avoidSDF),Object(c["t"])(i);for(const c of a)"CIMPictureMarker"!==c.cim.type&&"CIMPictureFill"!==c.cim.type&&"CIMPictureStroke"!==c.cim.type||(s||(s=[]),s.push(this._fetchPictureMarkerResource(c,i))),n&&"text"===c.type&&"string"==typeof c.text&&c.text.indexOf("[")>-1&&(c.text=Object(m["c"])(n,c.text,c.cim.textCase));return s&&await Promise.all(s),a}async _fetchPictureMarkerResource(e,t){const n=e.materialHash;if(!this._pictureMarkerCache.get(n)){const r=(await Object(o["default"])(e.cim.url,{responseType:"image",signal:t&&t.signal})).data;this._pictureMarkerCache.set(n,r)}}rasterizeCIMSymbol(e,t,n,r,i,a){const o=[];for(const c of e){r&&"function"==typeof r.scaleFactor&&(r.scaleFactor=r.scaleFactor(t,i,a));const e=this._getRasterizedResource(c,t,n,r,i,a);if(!e)continue;let s=0,l=e.anchorX||0,u=e.anchorY||0,f=!1,h=0,d=0;if("esriGeometryPoint"===n){const e=p(r,c,null);if(h=Object(m["d"])(c.offsetX,t,i,a)*e||0,d=Object(m["d"])(c.offsetY,t,i,a)*e||0,"marker"===c.type)s=Object(m["d"])(c.rotation,t,i,a)||0,f=!!c.rotateClockwise&&c.rotateClockwise;else if("text"===c.type){if(s=Object(m["d"])(c.angle,t,i,a)||0,void 0!==c.horizontalAlignment)switch(c.horizontalAlignment){case"left":l=-.5;break;case"right":l=.5;break;default:l=0}if(void 0!==c.verticalAlignment)switch(c.verticalAlignment){case"top":u=.5;break;case"bottom":u=-.5;break;case"baseline":u=-.25;break;default:u=0}}}null!=e&&o.push({angle:s,rotateClockWise:f,anchorX:l,anchorY:u,offsetX:h,offsetY:d,rasterizedResource:e})}return this.getSymbolImage(o)}getSymbolImage(e){const t=document.createElement("canvas"),n=t.getContext("2d");let r=0,a=0,o=0,c=0;const s=[];for(let h=0;h<e.length;h++){const t=e[h],l=t.rasterizedResource;if(!l)continue;const u=l.size,f=t.offsetX,d=t.offsetY,m=t.anchorX,g=t.anchorY,y=t.rotateClockWise||!1;let p=t.angle,b=Object(i["c"])(f)-u[0]*(.5+m),x=Object(i["c"])(d)-u[1]*(.5+g),C=b+u[0],w=x+u[1];if(p){y&&(p=-p);const e=Math.sin(p*Math.PI/180),t=Math.cos(p*Math.PI/180),n=b*t-x*e,r=b*e+x*t,i=b*t-w*e,a=b*e+w*t,o=C*t-w*e,c=C*e+w*t,s=C*t-x*e,l=C*e+x*t;b=Math.min(n,i,o,s),x=Math.min(r,a,c,l),C=Math.max(n,i,o,s),w=Math.max(r,a,c,l)}r=b<r?b:r,a=x<a?x:a,o=C>o?C:o,c=w>c?w:c;const O=n.createImageData(l.size[0],l.size[1]);O.data.set(new Uint8ClampedArray(l.image.buffer));const M={offsetX:f,offsetY:d,rotateClockwise:y,angle:p,rasterizedImage:O,anchorX:m,anchorY:g};s.push(M)}t.width=o-r,t.height=c-a;const l=-r,u=c;for(let h=0;h<s.length;h++){const e=s[h],t=this._imageDataToCanvas(e.rasterizedImage),r=e.rasterizedImage.width,a=e.rasterizedImage.height,o=l-r*(.5+e.anchorX),c=u-a*(.5-e.anchorY);if(e.angle){const r=(360-e.angle)*Math.PI/180;n.save(),n.translate(Object(i["c"])(e.offsetX),-Object(i["c"])(e.offsetY)),n.translate(l,u),n.rotate(r),n.translate(-l,-u),n.drawImage(t,o,c),n.restore()}else n.drawImage(t,o+Object(i["c"])(e.offsetX),c-Object(i["c"])(e.offsetY))}const f=new y["a"]({x:l/t.width-.5,y:u/t.height-.5});return{imageData:0!==t.width&&0!==t.height?n.getImageData(0,0,t.width,t.height):n.createImageData(1,1),anchorPosition:f}}_imageDataToCanvas(e){this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));const t=this._imageDataCanvas,n=t.getContext("2d");return t.width=e.width,t.height=e.height,n.putImageData(e,0,0),t}_imageTo32Array(e,t,n,r){this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas"));const i=this._imageDataCanvas,o=i.getContext("2d");if(i.width=t,i.height=n,o.drawImage(e,0,0,t,n),r){o.save();const i=new a["a"](r);o.fillStyle=i.toHex(),o.globalCompositeOperation="multiply",o.fillRect(0,0,t,n),o.globalCompositeOperation="destination-atop",o.drawImage(e,0,0,t,n),o.restore()}return new Uint32Array(o.getImageData(0,0,t,n).data.buffer)}_getRasterizedResource(e,t,n,i,a,o){let c,l,u,f,h=null,d=null;if("esriGeometryPolyline"===n||"esriGeometryPolygon"===n){const f=i&&i.style?i.style:r.Legend,g="esriGeometryPolyline"===n?b.stroke[f]:b.fill[f];if("line"===e.type){if("CIMSolidStroke"!==e.cim.type){if("CIMPictureStroke"===e.cim.type){const n=Object(m["d"])(e.width,t,a,o),r=Object(m["d"])(e.color,t,a,o),{image:i,width:c,height:s}=this._getPictureResource(e,n,r);return this._rasterizePictureResource(e,i,c,s,g,n)}return null}({analyzedCIM:c,hash:u}=O(e,t,a,o)),l=this._embedCIMLayerInVectorMarker(c,g)}else if("marker"===e.type){if("CIMPictureMarker"===e.cim.type){const n=Object(m["d"])(e.size,t,a,o),r=Object(m["d"])(e.color,t,a,o),{image:i,width:c,height:s}=this._getPictureResource(e,n,r);return this._rasterizePictureResource(e,i,c,s,g,n)}if("CIMVectorMarker"!==e.cim.type)return null;e.cim.offsetX=Object(m["d"])(e.offsetX,t,a,o),e.cim.offsetY=Object(m["d"])(e.offsetY,t,a,o),e.cim.rotation=Object(m["d"])(e.rotation,t,a,o),e.cim.markerPlacement=e.markerPlacement,({analyzedCIM:c}=O(e,t,a,o)),u=Object(s["b"])(JSON.stringify(c)).toString(),l=this._embedCIMLayerInVectorMarker(c,g),h=Object(m["d"])(e.size,t,a,o),d=e.path}else{if("text"===e.type)return null;if("fill"===e.type){if("CIMHatchFill"===e.cim.type||"CIMVectorMarker"===e.cim.type||"CIMPictureMarker"===e.cim.type||"CIMPictureFill"===e.cim.type){const n=e.cim.size||e.cim.height;let r,i,s;if("CIMPictureMarker"===e.cim.type||"CIMPictureFill"===e.cim.type)({image:r,width:i,height:s}=this._getPictureResource(e,n,Object(m["d"])(e.color,t,a,o)));else{({analyzedCIM:c,hash:u}=O(e,t,a,o));const l=this._rasterizer.rasterizeJSONResource({cim:c,type:e.type,url:e.url,mosaicHash:u,size:n,path:d},1,this._avoidSDF);r=l.image,i=l.size[0],s=l.size[1]}return this._rasterizePictureResource(e,r,i,s,g,null)}if("CIMSolidFill"!==e.cim.type)return null;({analyzedCIM:c,hash:u}=O(e,t,a,o)),l=this._embedCIMLayerInVectorMarker(c,g)}}}else{if("text"===e.type)return f=this._rasterizeTextResource(e,t,i,a,o),f;({analyzedCIM:c,hash:u}=O(e,t,a,o));const n=p(i,e,null);if("CIMPictureMarker"===e.cim.type){const r=Object(m["d"])(e.size,t,a,o)*n,{image:i,width:c,height:s}=this._getPictureResource(e,r,Object(m["d"])(e.color,t,a,o));return f={image:i,size:[c,s],sdf:!1,simplePattern:!1,anchorX:e.anchorPoint?e.anchorPoint.x:0,anchorY:e.anchorPoint?e.anchorPoint.y:0},f}Object(g["c"])(c,n,{preserveOutlineWidth:!1}),l=c}u+=n,i&&(u+=JSON.stringify(i));const y=this._resourceCache;return y.has(u)?y.get(u):(f=this._rasterizer.rasterizeJSONResource({cim:l,type:e.type,url:e.url,mosaicHash:u,size:h,path:d},window.devicePixelRatio||1,this._avoidSDF),y.set(u,f),f)}_rasterizeTextResource(e,t,n,r,i){const a=p(n,e,null),o=Object(m["d"])(e.text,t,r,i);if(!o||0===o.length)return null;const c=Object(m["d"])(e.fontName,t,r,i),s=Object(m["d"])(e.style,t,r,i),l=Object(m["d"])(e.weight,t,r,i),u=Object(m["d"])(e.decoration,t,r,i),f=Object(m["d"])(e.size,t,r,i)*a,h=Object(m["d"])(e.horizontalAlignment,t,r,i),d=Object(m["d"])(e.verticalAlignment,t,r,i),g=Object(m["b"])(Object(m["d"])(e.color,t,r,i)),y=Object(m["b"])(Object(m["d"])(e.outlineColor,t,r,i)),b={color:g,size:f,horizontalAlignment:h,verticalAlignment:d,font:{family:c,style:s,weight:l,decoration:u},halo:{size:Object(m["d"])(e.outlineSize,t,r,i)||0,color:y,style:s},pixelRatio:1,premultiplyColors:!this._avoidSDF};return this._textRasterizer.rasterizeText(o,b)}_rasterizePictureResource(e,t,n,r,a,o){const c=document.createElement("canvas"),s=c.getContext("2d");c.height=Object(i["c"])(Math.max(a.frame.ymax-a.frame.ymin,o)),c.width=Object(i["c"])(a.frame.xmax-a.frame.xmin);const u=s.createImageData(n,r);u.data.set(new Uint8ClampedArray(t.buffer));const f=this._imageDataToCanvas(u),h=s.createPattern(f,"repeat"),d=Math.cos((-e.cim.rotation||0)*Math.PI/180),m=Math.sin((-e.cim.rotation||0)*Math.PI/180);h.setTransform({m11:d,m12:m,m21:-m,m22:d,m41:Object(i["c"])(e.cim.offsetX)||0,m42:Object(i["c"])(e.cim.offsetY)||0});const g=a.canvasPaths;let y,p,b;Object(l["g"])(g)?(y=g.rings,s.fillStyle=h,p=s.fill,b=["evenodd"]):Object(l["h"])(g)&&(y=g.paths,s.strokeStyle=h,s.lineWidth=o,p=s.stroke,y[0][0][1]=c.height/2,y[0][1][1]=c.height/2),s.beginPath();for(const l of y){const e=l?l.length:0;if(e>1){let t=l[0];s.moveTo(Object(i["c"])(t[0]),Object(i["c"])(t[1]));for(let n=1;n<e;++n)t=l[n],s.lineTo(Object(i["c"])(t[0]),Object(i["c"])(t[1]));s.closePath()}}p.apply(s,b);const x=s.getImageData(0,0,c.width,c.height),C=new Uint8Array(x.data);return{size:[c.width,c.height],image:new Uint32Array(C.buffer),sdf:!1,simplePattern:!1,anchorX:0,anchorY:0}}_getPictureResource(e,t,n){const r=this._pictureMarkerCache.get(e.materialHash);if(!r)return null;const a=r.height/r.width,o=t?a>1?Object(i["c"])(t):Object(i["c"])(t)/a:r.width,c=t?a>1?Object(i["c"])(t)*a:Object(i["c"])(t):r.height;return{image:this._imageTo32Array(r,o,c,n),width:o,height:c}}_embedCIMLayerInVectorMarker(e,t){const n=Object(l["g"])(t.geometry)?"CIMPolygonSymbol":"CIMLineSymbol",r=t.frame;return{type:"CIMVectorMarker",frame:r,size:r.ymax-r.ymin,markerGraphics:[{type:"CIMMarkerGraphic",geometry:t.geometry,symbol:{type:n,symbolLayers:[e]}}]}}}function C(e){return(e?Object.keys(e):[]).map(t=>({name:t,alias:t,type:"string"==typeof e[t]?"esriFieldTypeString":"esriFieldTypeDouble"}))}function w(e){if(!(e&&e.data&&e.data.symbol))return null;switch(e.data.symbol.type){case"CIMPointSymbol":case"CIMTextSymbol":return"esriGeometryPoint";case"CIMLineSymbol":return"esriGeometryPolyline";case"CIMPolygonSymbol":return"esriGeometryPolygon";default:return null}}function O(e,t,n,r){let i,a;return"function"==typeof e.materialHash?(i=(0,e.materialHash)(t,n,r),a=Object(u["a"])(e.cim,e.materialOverrides)):(i=e.materialHash,a=e.cim),{analyzedCIM:a,hash:i}}var M=n("2003"),v=n("4bad");const P=new x(null,!0),S=M["a"].maxSize;async function j(e,t={}){const{size:n,maxSize:r,node:a,opacity:o}=t,c=t.cimOptions||t,{feature:s,fieldMap:l,geometryType:u,style:f}=c,h=Object(g["b"])(e),d="number"==typeof n?n:null,m=Math.min(null!=d?d:h,null!=r?r:Object(i["d"])(S));m!==h&&(e=e.clone(),Object(g["d"])(e,m,{preserveOutlineWidth:!0}));let y=3;e&&e.data&&e.data.symbol&&"CIMPointSymbol"!==e.data.symbol.type&&(y=1);const p=await P.rasterizeCIMSymbolAsync(e,s,l,u,{scaleFactor:y,style:f}),b=document.createElement("canvas");b.width=p.imageData.width,b.height=p.imageData.height,b.getContext("2d").putImageData(p.imageData,0,0);let x=b.width/y,C=b.height/y;if(null!=n&&(null==(null==t?void 0:t.scale)||(null==t?void 0:t.scale))){const e=x/C;x=e<=1?Math.ceil(m*e):m,C=e<=1?m:Math.ceil(m/e)}const w=new Image(x,C);w.src=b.toDataURL(),null!=o&&(w.style.opacity=""+o);let O=w;if(null!=t.effectView){const e={shape:{type:"image",x:0,y:0,width:x,height:C,src:w.src},fill:null,stroke:null,offset:[0,0]};O=Object(v["a"])([[e]],[x,C],{effectView:t.effectView})}return a&&a.appendChild(O),O}}}]);