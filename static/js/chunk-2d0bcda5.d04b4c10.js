(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0bcda5"],{"2a00":function(e,n,t){"use strict";t.r(n),t.d(n,"destroyContext",(function(){return O})),t.d(n,"dracoDecompressPointCloudData",(function(){return p})),t.d(n,"filterObbsForModifications",(function(){return E})),t.d(n,"filterObbsForModificationsSync",(function(){return P})),t.d(n,"initialize",(function(){return T})),t.d(n,"interpretObbModificationResults",(function(){return _})),t.d(n,"process",(function(){return h})),t.d(n,"setLegacySchema",(function(){return g})),t.d(n,"setModifications",(function(){return w})),t.d(n,"setModificationsSync",(function(){return A})),t.d(n,"test",(function(){return M}));var o,r,i=t("b2b2"),s=t("a21b");!function(e){e[e.None=0]="None",e[e.Int16=1]="Int16",e[e.Int32=2]="Int32"}(o||(o={})),function(e){e[e.Replace=0]="Replace",e[e.Outside=1]="Outside",e[e.Inside=2]="Inside",e[e.Finished=3]="Finished"}(r||(r={}));var a=t("b2cd");function f(){return u||(u=new Promise(e=>t.e("chunk-2d0e887f").then(t.bind(null,"8a55")).then(e=>e.i).then(({default:n})=>{const t=n({locateFile:c,onRuntimeInitialized:()=>e(t)});delete t.then})).catch(e=>Promise.reject(e))),u}function c(e){return Object(a["a"])("esri/libs/i3s/"+e)}let u;var l,d,b,m,y;t("0fc4");!function(e){e[e.Unmodified=0]="Unmodified",e[e.Culled=1]="Culled",e[e.NotChecked=2]="NotChecked"}(l||(l={})),function(e){e[e.Unmodified=0]="Unmodified",e[e.PotentiallyModified=1]="PotentiallyModified",e[e.Culled=2]="Culled",e[e.Unknown=3]="Unknown",e[e.NotChecked=4]="NotChecked"}(d||(d={}));!function(e){e[e.Unknown=0]="Unknown",e[e.Uncached=1]="Uncached",e[e.Cached=2]="Cached"}(b||(b={})),function(e){e[e.None=0]="None",e[e.MaxScreenThreshold=1]="MaxScreenThreshold",e[e.ScreenSpaceRelative=2]="ScreenSpaceRelative",e[e.RemovedFeatureDiameter=3]="RemovedFeatureDiameter",e[e.DistanceRangeFromDefaultCamera=4]="DistanceRangeFromDefaultCamera"}(m||(m={})),function(e){e[e.Hole=0]="Hole",e[e.Leaf=1]="Leaf"}(y||(y={}));async function h(e){await T();const n=[e.geometryBuffer];return{result:I(e,n),transferList:n}}async function p(e){var n;await T();const t=[e.geometryBuffer],{geometryBuffer:o}=e,r=o.byteLength,i=U._malloc(r),a=new Uint8Array(U.HEAPU8.buffer,i,r);a.set(new Uint8Array(o));const f=U.dracoDecompressPointCloudData(i,a.byteLength);if(U._free(i),f.error.length>0)throw"i3s.wasm: "+f.error;const c=(null==(n=f.featureIds)?void 0:n.length)>0?Object(s["m"])(f.featureIds):null,u=Object(s["m"])(f.positions);return c&&t.push(c.buffer),t.push(u.buffer),{result:{positions:u,featureIds:c},transferList:t}}async function E(e){await T(),P(e);const n={buffer:e.buffer};return{result:n,transferList:[n.buffer]}}async function w(e){await T(),A(e)}async function g(e){await T(),U.setLegacySchema(e.context,e.jsonSchema)}function O(e){F(e)}let L,U;function A(e){const n=e.modifications,t=U._malloc(8*n.length),o=new Float64Array(U.HEAPU8.buffer,t,n.length);for(let r=0;r<n.length;++r)o[r]=n[r];U.setModifications(e.context,t,n.length,e.isGeodetic),U._free(t)}function I(e,n){if(!U)return null;const{context:t,localOrigin:r,globalTrafo:a,mbs:f,obb:c,elevationOffset:u,geometryBuffer:l,geometryDescriptor:d,indexToVertexProjector:b,vertexToRenderProjector:m}=e,y=U._malloc(l.byteLength),h=33,p=U._malloc(h*Float64Array.BYTES_PER_ELEMENT),E=new Uint8Array(U.HEAPU8.buffer,y,l.byteLength);E.set(new Uint8Array(l));const w=new Float64Array(U.HEAPU8.buffer,p,h);R(w,r);let g=w.byteOffset+3*w.BYTES_PER_ELEMENT,O=new Float64Array(w.buffer,g);R(O,a),g+=16*w.BYTES_PER_ELEMENT,O=new Float64Array(w.buffer,g),R(O,f),g+=4*w.BYTES_PER_ELEMENT,Object(i["j"])(c)&&(O=new Float64Array(w.buffer,g),R(O,c.center),g+=3*w.BYTES_PER_ELEMENT,O=new Float64Array(w.buffer,g),R(O,c.halfSize),g+=3*w.BYTES_PER_ELEMENT,O=new Float64Array(w.buffer,g),R(O,c.quaternion));const L=d,A={isDraco:!1,isLegacy:!1,color:e.layouts.some(e=>e.some(e=>"color"===e.name)),normal:e.needNormals&&e.layouts.some(e=>e.some(e=>"normalCompressed"===e.name)),uv0:e.layouts.some(e=>e.some(e=>"uv0"===e.name)),uvRegion:e.layouts.some(e=>e.some(e=>"uvRegion"===e.name)),featureIndex:L.featureIndex},I=U.process(t,!!e.obb,y,E.byteLength,L,A,p,u,b,m,e.normalReferenceFrame);if(U._free(p),U._free(y),I.error.length>0)throw"i3s.wasm: "+I.error;if(I.discarded)return null;const _=I.componentOffsets.length>0?Object(s["m"])(I.componentOffsets):null,P=I.featureIds.length>0?Object(s["m"])(I.featureIds):null,F=Object(s["m"])(I.interleavedVertedData).buffer,T=I.indicesType===o.Int16?Object(s["m"])(new Uint16Array(I.indices.buffer,I.indices.byteOffset,I.indices.byteLength/2)):Object(s["m"])(new Uint32Array(I.indices.buffer,I.indices.byteOffset,I.indices.byteLength/4)),M=Object(s["m"])(I.positions),C=I.positionIndicesType===o.Int16?Object(s["m"])(new Uint16Array(I.positionIndices.buffer,I.positionIndices.byteOffset,I.positionIndices.byteLength/2)):Object(s["m"])(new Uint32Array(I.positionIndices.buffer,I.positionIndices.byteOffset,I.positionIndices.byteLength/4)),S={layout:e.layouts[0],interleavedVertexData:F,indices:T,hasColors:I.hasColors,hasModifications:I.hasModifications,positionData:{data:M,indices:C}};return P&&n.push(P.buffer),_&&n.push(_.buffer),n.push(F),n.push(T.buffer),n.push(M.buffer),n.push(C.buffer),{componentOffsets:_,featureIds:P,transformedGeometry:S,obb:I.obb}}function _(e){return 0===e?d.Unmodified:1===e?d.PotentiallyModified:2===e?d.Culled:d.Unknown}function P(e){const{context:n,buffer:t}=e,o=U._malloc(t.byteLength),r=t.byteLength/Float64Array.BYTES_PER_ELEMENT,i=new Float64Array(U.HEAPU8.buffer,o,r),s=new Float64Array(t);i.set(s),U.filterOBBs(n,o,r),s.set(i),U._free(o)}function F(e){U&&U.destroy(e)}function R(e,n){for(let t=0;t<n.length;++t)e[t]=n[t]}function T(){return U?Promise.resolve():(L||(L=f().then(e=>{U=e,L=null})),L)}const M={transform:I,destroy:F}}}]);