(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-434459a5"],{"00c0":function(e,t,s){"use strict";s.d(t,"a",(function(){return a}));var i=s("8c71"),r=s("0326"),n=s("7c4b");class a extends n["a"]{constructor(){super(...arguments),this._childrenSet=new Set,this._needsSort=!1,this.children=[],this._effectView=null}get blendMode(){return this._blendMode}set blendMode(e){this._blendMode=e,this.requestRender()}get clips(){return this._clips}set clips(e){this._clips=e,this.children.forEach(t=>t.clips=e)}get computedEffects(){var e,t;return null!=(e=null==(t=this._effectView)?void 0:t.effects)?e:null}get effect(){var e,t;return null!=(e=null==(t=this._effectView)?void 0:t.effect)?e:""}set effect(e){(this._effectView||e)&&(this._effectView||(this._effectView=new r["a"]),this._effectView.effect=e,this.requestRender())}updateTransitionProperties(e,t){super.updateTransitionProperties(e,t),this._effectView&&(this._effectView.transitionStep(e,t),this._effectView.transitioning&&this.requestRender())}doRender(e){const t=this.createRenderParams(e);this.renderChildren(t)}addChild(e){return this.addChildAt(e,this.children.length)}addChildAt(e,t=this.children.length){if(!e)return e;if(this.contains(e))return e;this._needsSort=!0;const s=e.parent;return s&&s!==this&&s.removeChild(e),t>=this.children.length?this.children.push(e):this.children.splice(t,0,e),this._childrenSet.add(e),e.parent=this,e.stage=this.stage,this!==this.stage&&(e.clips=this.clips),this.requestRender(),e}contains(e){return this._childrenSet.has(e)}removeAllChildren(){this._childrenSet.clear(),this._needsSort=!0;for(const e of this.children)this!==this.stage&&(e.clips=null),e.stage=null,e.parent=null;this.children.length=0}removeChild(e){return this.contains(e)?this.removeChildAt(this.children.indexOf(e)):e}removeChildAt(e){if(e<0||e>=this.children.length)return null;this._needsSort=!0;const t=this.children.splice(e,1)[0];return this._childrenSet.delete(t),this!==this.stage&&(t.clips=null),t.stage=null,t.parent=null,t}sortChildren(e){this._needsSort&&(this.children.sort(e),this._needsSort=!1)}_createTransforms(){return{dvs:Object(i["b"])()}}onAttach(){super.onAttach();const e=this.stage;for(const t of this.children)t.stage=e}onDetach(){super.onDetach();for(const e of this.children)e.stage=null}renderChildren(e){for(const t of this.children)t.beforeRender(e);for(const t of this.children)t.processRender(e);for(const t of this.children)t.afterRender(e)}createRenderParams(e){return{...e,blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:e.globalOpacity*this.computedOpacity,inFadeTransition:this.inFadeTransition}}}},"0326":function(e,t,s){"use strict";s.d(t,"a",(function(){return p}));var i=s("a4ee"),r=s("fc29"),n=s("c120"),a=s("7ffa"),o=s("e92d"),l=s("59b2"),c=(s("cea0"),s("d386")),h=s("b90c"),u=s("22f1");const d=-1;let p=class extends r["a"]{constructor(e){super(e),this._from=null,this._to=null,this._final=null,this._current=[],this._time=0,this.duration=Object(n["a"])("mapview-transitions-duration"),this.effects=[]}set effect(e){if(this._get("effect")!==(e=e||"")){this._set("effect",e);try{this._transitionTo(v(e))}catch(t){this._transitionTo([]),o["a"].getLogger(this.declaredClass).warn("Invalid Effect",{effect:e,error:t})}}}get hasEffects(){return this.transitioning||!!this.effects.length}set scale(e){this._updateForScale(e)}get transitioning(){return null!==this._to}canTransitionTo(e){try{return this.scale>0&&f(this._current,v(e),this.scale)}catch{return!1}}transitionStep(e,t){this._applyTimeTransition(e),this._updateForScale(t)}end(){this._applyTimeTransition(this.duration)}_transitionTo(e){this.scale>0&&f(this._current,e,this.scale)?(this._final=e,this._to=Object(a["a"])(e),b(this._current,this._to,this.scale),this._from=Object(a["a"])(this._current),this._time=0):(this._from=this._to=this._final=null,this._current=e),this._set("effects",this._current[0]?Object(a["a"])(this._current[0].effects):[])}_applyTimeTransition(e){if(!(this._to&&this._from&&this._current&&this._final))return;this._time+=e;const t=Math.min(1,this._time/this.duration);for(let s=0;s<this._current.length;s++){const e=this._current[s],i=this._from[s],r=this._to[s];e.scale=g(i.scale,r.scale,t);for(let s=0;s<e.effects.length;s++){const n=e.effects[s],a=i.effects[s],o=r.effects[s];n.interpolate(a,o,t)}}1===t&&(this._current=this._final,this._set("effects",this._current[0]?Object(a["a"])(this._current[0].effects):[]),this._from=this._to=this._final=null)}_updateForScale(e){if(this._set("scale",e),0===this._current.length)return;const t=this._current,s=this._current.length-1;let i,r,n=1;if(1===t.length||e>=t[0].scale)r=i=t[0].effects;else if(e<=t[s].scale)r=i=t[s].effects;else for(let a=0;a<s;a++){const s=t[a],o=t[a+1];if(s.scale>=e&&o.scale<=e){n=(e-s.scale)/(o.scale-s.scale),i=s.effects,r=o.effects;break}}for(let a=0;a<this.effects.length;a++)this.effects[a].interpolate(i[a],r[a],n)}};function v(e){const t=Object(h["a"])(e)||[];return y(t)?[{scale:d,effects:t}]:t}function f(e,t,s){var i,r,n,a;return null==(i=e[0])||!i.effects||null==(r=t[0])||!r.effects||!(((null==(n=e[0])?void 0:n.scale)===d||(null==(a=t[0])?void 0:a.scale)===d)&&(e.length>1||t.length>1)&&s<=0)&&Object(u["a"])(e[0].effects,t[0].effects)}function b(e,t,s){var i,r;const n=e.length>t.length?e:t,a=e.length>t.length?t:e,o=a[a.length-1],l=null!=(i=null==o?void 0:o.scale)?i:s,c=null!=(r=null==o?void 0:o.effects)?r:[];for(let h=a.length;h<n.length;h++)a.push({scale:l,effects:[...c]});for(let h=0;h<n.length;h++)a[h].scale=a[h].scale===d?s:a[h].scale,n[h].scale=n[h].scale===d?s:n[h].scale,Object(u["c"])(a[h].effects,n[h].effects)}function g(e,t,s){return e+(t-e)*s}function y(e){const t=e[0];return!!t&&"type"in t}Object(i["a"])([Object(l["b"])()],p.prototype,"_to",void 0),Object(i["a"])([Object(l["b"])()],p.prototype,"duration",void 0),Object(i["a"])([Object(l["b"])({value:""})],p.prototype,"effect",null),Object(i["a"])([Object(l["b"])({readOnly:!0})],p.prototype,"effects",void 0),Object(i["a"])([Object(l["b"])({readOnly:!0})],p.prototype,"hasEffects",null),Object(i["a"])([Object(l["b"])({value:0})],p.prototype,"scale",null),Object(i["a"])([Object(l["b"])({readOnly:!0})],p.prototype,"transitioning",null),p=Object(i["a"])([Object(c["a"])("esri.layers.effects.EffectView")],p)},"18c6":function(e,t,s){"use strict";s.d(t,"a",(function(){return A})),s.d(t,"b",(function(){return P})),s.d(t,"c",(function(){return M})),s.d(t,"d",(function(){return E})),s.d(t,"e",(function(){return w})),s.d(t,"f",(function(){return I})),s.d(t,"g",(function(){return V}));var i=s("ce50"),r=s("32dd"),n=s("c84e");function a(e,t){const s=n["e"].SIZE_FIELD_STOPS|n["e"].SIZE_MINMAX_VALUE|n["e"].SIZE_SCALE_STOPS|n["e"].SIZE_UNIT_VALUE,i=(e&(n["f"].FIELD_TARGETS_OUTLINE|n["f"].MINMAX_TARGETS_OUTLINE|n["f"].SCALE_TARGETS_OUTLINE|n["f"].UNIT_TARGETS_OUTLINE))>>>4;return t.isOutline||t.isOutlinedFill?s&i:s&~i}const o=0,l=8,c=7,h=8,u=11,d=11,p=12,v=13,f=14,b=15,g=15,y=16,O=17,S=18,_=19,m=20,R=21,j=22;function V(e,t){switch(e){case n["d"].FILL:return A.from(t);case n["d"].LINE:return M.from(t);case n["d"].MARKER:return E.from(t);case n["d"].TEXT:return I.from(t);case n["d"].LABEL:return P.from(t);default:throw new Error("Unable to createMaterialKey for unknown geometryType "+e)}}class w{constructor(e){this._data=0,this._data=e}static load(e){const t=this.shared;return t.data=e,t}set data(e){this._data=e}get data(){return this._data}get geometryType(){return this.bits(h,u)}set geometryType(e){this.setBits(e,h,u)}get mapAligned(){return!!this.bit(m)}set mapAligned(e){this.setBit(m,e)}get sdf(){return!!this.bit(d)}set sdf(e){this.setBit(d,e)}get pattern(){return!!this.bit(p)}set pattern(e){this.setBit(p,e)}get textureBinding(){return this.bits(o,l)}set textureBinding(e){this.setBits(e,o,l)}get geometryTypeString(){switch(this.geometryType){case n["d"].FILL:return"fill";case n["d"].MARKER:return"marker";case n["d"].LINE:return"line";case n["d"].TEXT:return"text";case n["d"].LABEL:return"label";default:throw new i["a"]("Unable to handle unknown geometryType: "+this.geometryType)}}setBit(e,t){const s=1<<e;t?this._data|=s:this._data&=~s}bit(e){return(this._data&1<<e)>>e}setBits(e,t,s){for(let i=t,r=0;i<s;i++,r++)this.setBit(i,0!=(e&1<<r))}bits(e,t){let s=0;for(let i=e,r=0;i<t;i++,r++)s|=this.bit(i)<<r;return s}hasVV(){return!1}setVV(e,t){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf}}getVariationHash(){return this._data&~(c&this.textureBinding)}}w.shared=new w(0);const T=e=>class extends e{get vvSizeMinMaxValue(){return 0!==this.bit(y)}set vvSizeMinMaxValue(e){this.setBit(y,e)}get vvSizeScaleStops(){return 0!==this.bit(O)}set vvSizeScaleStops(e){this.setBit(O,e)}get vvSizeFieldStops(){return 0!==this.bit(S)}set vvSizeFieldStops(e){this.setBit(S,e)}get vvSizeUnitValue(){return 0!==this.bit(_)}set vvSizeUnitValue(e){this.setBit(_,e)}hasVV(){return super.hasVV()||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}setVV(e,t){super.setVV(e,t);const s=a(e,t)&e;this.vvSizeMinMaxValue=!!(s&n["e"].SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(s&n["e"].SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(s&n["e"].SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(s&n["e"].SIZE_SCALE_STOPS)}},L=e=>class extends e{get vvRotation(){return 0!==this.bit(b)}set vvRotation(e){this.setBit(b,e)}hasVV(){return super.hasVV()||this.vvRotation}setVV(e,t){super.setVV(e,t),this.vvRotation=!t.isOutline&&!!(e&n["e"].ROTATION)}},C=e=>class extends e{get vvColor(){return 0!==this.bit(v)}set vvColor(e){this.setBit(v,e)}hasVV(){return super.hasVV()||this.vvColor}setVV(e,t){super.setVV(e,t),this.vvColor=!t.isOutline&&!!(e&n["e"].COLOR)}},z=e=>class extends e{get vvOpacity(){return 0!==this.bit(f)}set vvOpacity(e){this.setBit(f,e)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(e,t){super.setVV(e,t),this.vvOpacity=!t.isOutline&&!!(e&n["e"].OPACITY)}};class A extends(C(z(T(w)))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=n["d"].FILL,t.dotDensity="dot-density"===e.stride.fill,t.simple="simple"===e.stride.fill,t.outlinedFill=e.isOutlinedFill,t.dotDensity||t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),dotDensity:this.dotDensity,outlinedFill:this.outlinedFill,simple:this.simple,vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}get dotDensity(){return!!this.bit(g)}set dotDensity(e){this.setBit(g,e)}get simple(){return!!this.bit(j)}set simple(e){this.setBit(j,e)}get outlinedFill(){return!!this.bit(R)}set outlinedFill(e){this.setBit(R,e)}}A.shared=new A(0);class E extends(C(z(L(T(w))))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=n["d"].MARKER,t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}E.shared=new E(0);class M extends(C(z(T(w)))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=n["d"].LINE,t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}M.shared=new M(0);class I extends(C(z(L(T(w))))){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=n["d"].TEXT,t.setVV(e.vvFlags,e),t.data}getVariation(){return{...super.getVariation(),vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}I.shared=new I(0);class P extends(T(w)){static load(e){const t=this.shared;return t.data=e,t}static from(e){const t=this.load(0);return t.geometryType=n["d"].LABEL,t.setVV(e.vvFlags,e),t.mapAligned=Object(r["i"])(e.placement),t.data}getVariation(){return{...super.getVariation(),vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue}}}P.shared=new P(0)},"32dd":function(e,t,s){"use strict";var i,r;function n(e){switch(e){case"left":return i.Left;case"right":return i.Right;case"center":case"justify":return i.Center}}function a(e){switch(e){case"top":return r.Top;case"middle":return r.Center;case"baseline":return r.Baseline;case"bottom":return r.Bottom}}function o(e){switch(e){case"above-left":case"esriServerPointLabelPlacementAboveLeft":return[i.Right,r.Bottom];case"above-center":case"above-along":case"esriServerPointLabelPlacementAboveCenter":case"esriServerLinePlacementAboveAlong":return[i.Center,r.Bottom];case"above-right":case"esriServerPointLabelPlacementAboveRight":return[i.Left,r.Bottom];case"center-left":case"esriServerPointLabelPlacementCenterLeft":return[i.Right,r.Center];case"center-center":case"center-along":case"esriServerPointLabelPlacementCenterCenter":case"esriServerLinePlacementCenterAlong":case"always-horizontal":case"esriServerPolygonPlacementAlwaysHorizontal":return[i.Center,r.Center];case"center-right":case"esriServerPointLabelPlacementCenterRight":return[i.Left,r.Center];case"below-left":case"esriServerPointLabelPlacementBelowLeft":return[i.Right,r.Top];case"below-center":case"below-along":case"esriServerPointLabelPlacementBelowCenter":case"esriServerLinePlacementBelowAlong":return[i.Center,r.Top];case"below-right":case"esriServerPointLabelPlacementBelowRight":return[i.Left,r.Top];default:return console.debug("Found invalid placement type "+e),[i.Center,r.Center]}}function l(e){switch(e){case i.Right:return-1;case i.Center:return 0;case i.Left:return 1;default:return console.debug("Found invalid horizontal alignment "+e),0}}function c(e){switch(e){case r.Top:return 1;case r.Center:return 0;case r.Bottom:case r.Baseline:return-1;default:return console.debug("Found invalid vertical alignment "+e),0}}function h(e){switch(e){case"left":return i.Left;case"right":return i.Right;case"center":case"justify":return i.Center}}function u(e){switch(e){case"above-along":case"below-along":case"center-along":case"esriServerLinePlacementAboveAlong":case"esriServerLinePlacementBelowAlong":case"esriServerLinePlacementCenterAlong":return!0;default:return!1}}s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return r})),s.d(t,"c",(function(){return o})),s.d(t,"d",(function(){return h})),s.d(t,"e",(function(){return n})),s.d(t,"f",(function(){return l})),s.d(t,"g",(function(){return a})),s.d(t,"h",(function(){return c})),s.d(t,"i",(function(){return u})),function(e){e[e.Left=-1]="Left",e[e.Center=0]="Center",e[e.Right=1]="Right"}(i||(i={})),function(e){e[e.Top=1]="Top",e[e.Center=0]="Center",e[e.Bottom=-1]="Bottom",e[e.Baseline=2]="Baseline"}(r||(r={}))},"365a":function(e,t,s){"use strict";s.d(t,"a",(function(){return v}));var i=s("a4ee"),r=s("fc29"),n=s("ce6d"),a=s("9096"),o=s("a5d83"),l=s("e92d"),c=s("b2b2"),h=s("fab3"),u=s("59b2"),d=(s("b50f"),s("c120"),s("cea0"),s("d386"));let p=class extends(Object(a["b"])(Object(o["a"])(Object(h["b"])(n["a"].EventedMixin(r["a"]))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch(e=>{if("layerview:create-error"!==e.name){const t=this.layer&&this.layer.id||"no id",s=this.layer&&this.layer.title||"no title";throw l["a"].getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${s}', id: '${t}')`,e),e}})}get fullOpacity(){return Object(c["r"])(this.get("layer.opacity"),1)*Object(c["r"])(this.get("parent.fullOpacity"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer.legendEnabled}get updating(){var e;return!!(null!=(e=this.updatingHandles)&&e.updating||this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){var e;return!0===(null==(e=this.layer)?void 0:e.visible)}set visible(e){void 0!==e?this._override("visible",e):this._clearOverride("visible")}canResume(){var e,t,s;return this.visible&&(null==(e=this.layer)?void 0:e.loaded)&&!(null!=(t=this.parent)&&t.suspended)&&(null==(s=this.view)?void 0:s.ready)||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{},t=this;return t.view&&t.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};Object(i["a"])([Object(u["b"])()],p.prototype,"fullOpacity",null),Object(i["a"])([Object(u["b"])()],p.prototype,"layer",void 0),Object(i["a"])([Object(u["b"])()],p.prototype,"parent",void 0),Object(i["a"])([Object(u["b"])({readOnly:!0})],p.prototype,"suspended",null),Object(i["a"])([Object(u["b"])({readOnly:!0})],p.prototype,"suspendInfo",null),Object(i["a"])([Object(u["b"])({readOnly:!0})],p.prototype,"legendEnabled",null),Object(i["a"])([Object(u["b"])({type:Boolean,readOnly:!0})],p.prototype,"updating",null),Object(i["a"])([Object(u["b"])({readOnly:!0})],p.prototype,"updatingProgress",null),Object(i["a"])([Object(u["b"])()],p.prototype,"visible",null),Object(i["a"])([Object(u["b"])()],p.prototype,"view",void 0),p=Object(i["a"])([Object(d["a"])("esri.views.layers.LayerView")],p);const v=p},"566d":function(e,t,s){"use strict";s.d(t,"a",(function(){return L}));var i=s("a4ee"),r=s("2c4f"),n=s("7d7d"),a=s("ce50"),o=s("477c"),l=s("59b2"),c=(s("b50f"),s("c120"),s("cea0"),s("d386")),h=s("00c0"),u=s("6a0e");s("e92d"),s("2dd4");let d=class extends u["a"]{};d=Object(i["a"])([Object(c["a"])("esri.views.layers.support.ClipArea")],d);const p=d;var v;let f=v=class extends p{constructor(){super(...arguments),this.type="rect",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new v({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}get version(){return(this._get("version")||0)+1}};Object(i["a"])([Object(l["b"])({type:[Number,String],json:{write:!0}})],f.prototype,"left",void 0),Object(i["a"])([Object(l["b"])({type:[Number,String],json:{write:!0}})],f.prototype,"right",void 0),Object(i["a"])([Object(l["b"])({type:[Number,String],json:{write:!0}})],f.prototype,"top",void 0),Object(i["a"])([Object(l["b"])({type:[Number,String],json:{write:!0}})],f.prototype,"bottom",void 0),Object(i["a"])([Object(l["b"])({readOnly:!0})],f.prototype,"version",null),f=v=Object(i["a"])([Object(c["a"])("esri.views.layers.support.ClipRect")],f);const b=f;s("e06a");var g,y=s("3760"),O=s("a9ab"),S=s("3af1"),_=s("1219");const m={base:y["a"],key:"type",typeMap:{extent:S["a"],polygon:_["a"]}};let R=g=class extends p{constructor(){super(...arguments),this.type="geometry",this.geometry=null}get version(){return(this._get("version")||0)+1}clone(){return new g({geometry:this.geometry.clone()})}};Object(i["a"])([Object(l["b"])({types:m,json:{read:O["a"],write:!0}})],R.prototype,"geometry",void 0),Object(i["a"])([Object(l["b"])({readOnly:!0})],R.prototype,"version",null),R=g=Object(i["a"])([Object(c["a"])("esri.views.layers.support.Geometry")],R);const j=R;let V=class extends p{constructor(){super(...arguments),this.type="path",this.path=[]}get version(){return(this._get("version")||0)+1}};Object(i["a"])([Object(l["b"])({type:[[[Number]]],json:{write:!0}})],V.prototype,"path",void 0),Object(i["a"])([Object(l["b"])({readOnly:!0})],V.prototype,"version",null),V=Object(i["a"])([Object(c["a"])("esri.views.layers.support.Path")],V);const w=V,T=r["a"].ofType({key:"type",base:p,typeMap:{rect:b,path:w,geometry:j}}),L=e=>{let t=class extends e{constructor(){super(...arguments),this.attached=!1,this.clips=new T,this.lastUpdateId=-1,this.moving=!1,this.updateRequested=!1}initialize(){var e,t,s,i;const r=null==(e=null==(t=this.view)?void 0:t.spatialReferenceLocked)||e;(null==(s=this.view)?void 0:s.spatialReference)&&r&&!this.spatialReferenceSupported?this.addResolvingPromise(Promise.reject(new a["a"]("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",{layer:this.layer}))):(this.container||(this.container=new h["a"]),this.container.fadeTransitionEnabled=!0,this.container.opacity=0,this.container.clips=this.clips,this.handles.add([Object(o["e"])(()=>this.suspended,e=>{this.container&&(this.container.visible=!e),this.view&&!e&&this.updateRequested&&this.view.requestUpdate()},o["d"]),Object(o["e"])(()=>{var e,t;return null!=(e=null==(t=this.layer)?void 0:t.opacity)?e:1},e=>{this.container&&(this.container.opacity=e)},o["d"]),Object(o["e"])(()=>this.layer&&"blendMode"in this.layer?this.layer.blendMode:"normal",e=>{this.container&&(this.container.blendMode=e)},o["d"]),Object(o["e"])(()=>this.layer&&"effect"in this.layer?this.layer.effect:null,e=>{this.container&&(this.container.effect=e)},o["d"]),Object(o["b"])(()=>this.clips,"change",()=>{this.container&&(this.container.clips=this.clips)})]),null!=(i=this.view)&&i.whenLayerView?this.view.whenLayerView(this.layer).then(e=>{e===this&&this.processAttach()},()=>{}):this.when().then(()=>{this.processAttach()},()=>{}))}destroy(){this.processDetach(),this.updateRequested=!1}get spatialReferenceSupported(){var e;const t=null==(e=this.view)?void 0:e.spatialReference;return null==t||this.supportsSpatialReference(t)}get updating(){var e;return this.spatialReferenceSupported&&(!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())||!(null==(e=this.updatingHandles)||!e.updating))}get visibleAtCurrentScale(){return this.isVisibleAtScale(this.view.scale)}processAttach(){this.isResolved()&&!this.attached&&!this.destroyed&&this.spatialReferenceSupported&&(this.attach(),this.attached=!0,this.requestUpdate())}processDetach(){this.attached&&(this.attached=!1,this.detach(),this.updateRequested=!1)}isVisibleAtScale(e){const t=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;if(!t)return!0;const{minScale:s,maxScale:i}=t;return(0===s||e<=s)&&(0===i||e>=i)}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.suspended||this.view.requestUpdate())}processUpdate(e){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",e),this.updateRequested&&!this.suspended&&(this.updateRequested=!1,this.update(e))):this.updateRequested=!1}hitTest(e,t){return Promise.resolve(null)}supportsSpatialReference(e){return!0}canResume(){return!!this.spatialReferenceSupported&&!!super.canResume()&&this.visibleAtCurrentScale}getSuspendInfo(){const e=super.getSuspendInfo(),t=!this.spatialReferenceSupported,s=this.visibleAtCurrentScale;return t&&(e.spatialReferenceNotSupported=t),s&&(e.outsideScaleRange=s),e}};return Object(i["a"])([Object(l["b"])()],t.prototype,"attached",void 0),Object(i["a"])([Object(l["b"])({type:T,set(e){const t=Object(n["b"])(e,this._get("clips"),T);this._set("clips",t)}})],t.prototype,"clips",void 0),Object(i["a"])([Object(l["b"])()],t.prototype,"container",void 0),Object(i["a"])([Object(l["b"])()],t.prototype,"moving",void 0),Object(i["a"])([Object(l["b"])({readOnly:!0})],t.prototype,"spatialReferenceSupported",null),Object(i["a"])([Object(l["b"])({readOnly:!0})],t.prototype,"updateParameters",void 0),Object(i["a"])([Object(l["b"])()],t.prototype,"updateRequested",void 0),Object(i["a"])([Object(l["b"])()],t.prototype,"updating",null),Object(i["a"])([Object(l["b"])()],t.prototype,"view",void 0),Object(i["a"])([Object(l["b"])({readOnly:!0})],t.prototype,"visibleAtCurrentScale",null),t=Object(i["a"])([Object(c["a"])("esri.views.2d.layers.LayerView2D")],t),t}},"7c4b":function(e,t,s){"use strict";s.d(t,"a",(function(){return l}));var i=s("ce6d"),r=s("c120"),n=s("b2b2"),a=s("f4cc");const o=1/Object(r["a"])("mapview-transitions-duration");class l extends i["a"]{constructor(){super(...arguments),this._fadeOutResolver=null,this._fadeInResolver=null,this._clips=null,this.computedVisible=!0,this.computedOpacity=1,this.fadeTransitionEnabled=!1,this.inFadeTransition=!1,this._isReady=!1,this._opacity=1,this._stage=null,this._visible=!0}get clips(){return this._clips}set clips(e){this._clips=e,this.requestRender()}get isReady(){return this._isReady}get opacity(){return this._opacity}set opacity(e){this._opacity!==e&&(this._opacity=Math.min(1,Math.max(e,0)),this.requestRender())}get stage(){return this._stage}set stage(e){if(this._stage===e)return;const t=this._stage;this._stage=e,e?this._stage.untrashDisplayObject(this)||(this.onAttach(),this.emit("attach")):t.trashDisplayObject(this)}get transforms(){return this._getTransforms()}_getTransforms(){return Object(n["i"])(this._transforms)&&(this._transforms=this._createTransforms()),this._transforms}get visible(){return this._visible}set visible(e){this._visible!==e&&(this._visible=e,this.requestRender())}fadeIn(){return this._fadeInResolver||(this._fadeOutResolver&&(this._fadeOutResolver(),this._fadeOutResolver=null),this.computedOpacity=0,this.fadeTransitionEnabled=!0,this._fadeInResolver=Object(a["f"])(),this.requestRender()),this._fadeInResolver.promise}fadeOut(){return this._fadeOutResolver||(this._fadeInResolver&&(this._fadeInResolver(),this._fadeInResolver=null),this.fadeTransitionEnabled=!0,this._fadeOutResolver=Object(a["f"])(),this.requestRender()),this._fadeOutResolver.promise}beforeRender(e){this.updateTransitionProperties(e.deltaTime,e.state.scale)}afterRender(e){this._fadeInResolver&&this.computedOpacity===this.opacity?(this._fadeInResolver(),this._fadeInResolver=null):this._fadeOutResolver&&0===this.computedOpacity&&(this._fadeOutResolver(),this._fadeOutResolver=null)}remove(){var e;null==(e=this.parent)||e.removeChild(this)}setTransform(e){}processRender(e){this.stage&&this.computedVisible&&this.doRender(e)}requestRender(){this.stage&&this.stage.requestRender()}processDetach(){this._fadeInResolver&&(this._fadeInResolver(),this._fadeInResolver=null),this._fadeOutResolver&&(this._fadeOutResolver(),this._fadeOutResolver=null),this.onDetach(),this.emit("detach")}updateTransitionProperties(e,t){if(this.fadeTransitionEnabled){const t=this._fadeOutResolver||!this.visible?0:this.opacity,s=this.computedOpacity;if(s===t)this.computedVisible=this.visible;else{const i=e*o;this.computedOpacity=s>t?Math.max(t,s-i):Math.min(t,s+i),this.computedVisible=this.computedOpacity>0;const r=t===this.computedOpacity;this.inFadeTransition=!r,r||this.requestRender()}}else this.computedOpacity=this.opacity,this.computedVisible=this.visible}onAttach(){}onDetach(){}doRender(e){}ready(){this._isReady||(this._isReady=!0,this.emit("isReady"),this.requestRender())}}}}]);