(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21ef35"],{d86a:function(e,i,t){"use strict";t.r(i),t.d(i,"default",(function(){return v}));var r=t("a4ee"),s=(t("e92d"),t("cea0"),t("b50f"),t("c120"),t("2dd4"),t("d386")),a=t("9a02"),l=t("d17d");class n extends a["a"]{constructor(){super(...arguments),this.requiresDedicatedFBO=!1}dispose(){}doRender(e){const i=this.createRenderParams(e),{context:t,painter:r,profiler:s}=i;this._prevFBO=t.getBoundFramebufferObject(),s.recordContainerStart(this.name);const a=this._getFbo(i),n=r.getRenderTarget();t.bindFramebuffer(a),r.setRenderTarget(a),t.setDepthWriteEnabled(!0),t.setColorMask(!0,!0,!0,!0),t.setClearColor(0,0,0,0),t.setClearDepth(1),t.clear(t.gl.COLOR_BUFFER_BIT|t.gl.DEPTH_BUFFER_BIT),t.setDepthWriteEnabled(!1);for(const l of this.children)l.beforeRender(e);for(const l of this.children)l.processRender(i);for(const l of this.children)l.afterRender(e);r.setRenderTarget(n),r.releaseFbo(a),t.bindFramebuffer(this._prevFBO),r.beforeRenderLayer(i,this._clippingInfos?255:0,this.computedOpacity),t.setStencilTestEnabled(!1),t.setStencilWriteMask(0),r.blitTexture(t,a.colorTexture,l["z"].NEAREST),r.compositeLayer(i,this.computedOpacity),s.recordContainerEnd()}createRenderParams(e){return{...super.createRenderParams(e),blendMode:this.blendMode,effects:this.computedEffects,globalOpacity:1}}_getFbo(e){const{context:i,painter:t}=e,{width:r,height:s}=i.getViewport();return t.acquireFbo(r,s)}}var d=t("566d"),h=t("2c4f"),o=t("7d7d"),c=t("59b2"),y=t("365a");let b=class extends y["a"]{constructor(e){super(e),this.type="group",this.layerViews=new h["a"]}initialize(){this.handles.add([this.layerViews.on("change",e=>this._layerViewsChangeHandler(e)),this.layer.watch("visibilityMode",()=>this._visibilityModeHandler(),!0),this.watch("visible",()=>this._visibleHandler(),!0)],"grouplayerview"),this._layerViewsChangeHandler({target:null,added:this.layerViews.toArray(),removed:[],moved:[]})}set layerViews(e){this._set("layerViews",Object(o["b"])(e,this._get("layerViews")))}get updatingProgress(){return 0===this.layerViews.length?1:this.layerViews.reduce((e,i)=>e+i.updatingProgress,0)/this.layerViews.length}isUpdating(){return this.layerViews.some(e=>e.updating)}_hasLayerViewVisibleOverrides(){return this.layerViews.some(e=>e._isOverridden("visible"))}_findLayerViewForLayer(e){return e&&this.layerViews.find(i=>i.layer===e)}_firstVisibleOnLayerOrder(){const e=this.layer.layers.find(e=>{const i=this._findLayerViewForLayer(e);return i&&i.visible});return e&&this._findLayerViewForLayer(e)}_enforceExclusiveVisibility(e){this._hasLayerViewVisibleOverrides()&&(e||!(e=this._firstVisibleOnLayerOrder())&&this.layerViews.length>0&&(e=this._findLayerViewForLayer(this.layer.layers.getItemAt(0))),this.layerViews.forEach(i=>{i.visible=i===e}))}_layerViewsChangeHandler(e){this.handles.remove("grouplayerview:visible"),this.handles.add(this.layerViews.map(e=>e.watch("visible",i=>this._layerViewVisibleHandler(i,e),!0)).toArray(),"grouplayerview:visible");const i=e.added[e.added.length-1];let t=null;i&&i.visible&&(t=i),this._enforceVisibility(t)}_enforceVisibility(e){if(this._hasLayerViewVisibleOverrides())switch(this.layer.visibilityMode){case"inherited":{const e=this.visible;this.layerViews.forEach(i=>{i.visible=e});break}case"exclusive":this._enforceExclusiveVisibility(e)}}_visibilityModeHandler(){this._enforceVisibility()}_layerViewVisibleHandler(e,i){if(this._hasLayerViewVisibleOverrides())switch(this.layer.visibilityMode){case"inherited":e!==this.visible&&(i.visible=this.visible);break;case"exclusive":this._enforceExclusiveVisibility(e&&i)}}_visibleHandler(){var e;this._hasLayerViewVisibleOverrides()&&"inherited"===(null==(e=this.layer)?void 0:e.visibilityMode)&&this._enforceVisibility()}};Object(r["a"])([Object(c["b"])({cast:o["a"]})],b.prototype,"layerViews",null),Object(r["a"])([Object(c["b"])({readOnly:!0})],b.prototype,"updatingProgress",null),Object(r["a"])([Object(c["b"])()],b.prototype,"view",void 0),b=Object(r["a"])([Object(s["a"])("esri.views.layers.GroupLayerView")],b);const u=b;let w=class extends(Object(d["a"])(u)){constructor(){super(...arguments),this.container=new n}attach(){this._updateStageChildren(),this.handles.add(this.layerViews.on("after-changes",()=>this._updateStageChildren()),"grouplayerview2d")}detach(){this.handles.remove("grouplayerview2d"),this.container.removeAllChildren()}update(e){}moveStart(){}viewChange(){}moveEnd(){}_updateStageChildren(){this.container.removeAllChildren(),this.layerViews.forEach((e,i)=>this.container.addChildAt(e.container,i))}};w=Object(r["a"])([Object(s["a"])("esri.views.2d.layers.GroupLayerView2D")],w);const v=w}}]);